(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12a8aa1c"],{"03b7":function(t,e,a){"use strict";var n=a("9768"),i=a.n(n);i.a},5118:function(t,e,a){(function(t){var n="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},a("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},"5bf3":function(t,e,a){"use strict";e["a"]={ADD:{value:"1",text:"新增",color:"green"},CHANGE:{value:"2",text:"变更",color:"green"},UNDO:{value:"3",text:"撤销",color:"red"}}},"5f1a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",[a("a-card",{attrs:{bordered:!1}},[a("help",{attrs:{routerName:t.routerName}}),a("a-steps",{style:t.stepStyle,attrs:{type:"navigation"},on:{change:t.tabsChange},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[a("a-step",{attrs:{title:"数据录入"}}),a("a-step",{attrs:{title:"数据审核"}}),a("a-step",{attrs:{title:"数据提交"}})],1),t.alive&&"0"==t.current?a("personnelReportCom"):t._e(),t.alive&&"1"==t.current?a("groupPrintingCom"):t._e(),t.alive&&"2"==t.current?a("electronicFileCom"):t._e(),a("next-modal",{attrs:{visible:t.nextVisible},on:{cancel:t.nextCancelClick,confirm:t.nextConfirmClick}},[a("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.nextMessage))])])],1)],1)},i=[],r=(a("b0c0"),a("a9e3"),a("ac1f"),a("5319"),a("5530")),o=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("div",{staticClass:"personnelReport-box"},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{xs:24,lg:8,xl:6,xxl:5}},[n("a-form-item",{attrs:{label:"快速搜索"}},[n("a-input",{attrs:{placeholder:"请输入姓名\\公民身份号码"},on:{blur:e.searchClick},model:{value:e.query.selectValue,callback:function(t){e.$set(e.query,"selectValue",t)},expression:"query.selectValue"}})],1)],1),n("a-col",{attrs:{xs:24,lg:12,xl:12,xxl:9}},[n("a-form-item",[n("a-button",{on:{click:e.searchClick}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.query={},t.searchClick()}}},[e._v("重置")]),e.$route.path.includes("/add")?n("a-button",{staticStyle:{"margin-left":"24px"},attrs:{type:"primary"},on:{click:function(t){return e.detailsClick("新增")}}},[e._v("新增")]):e._e(),e.$route.path.includes("/add")?n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",loading:e.uploading,disabled:e.uploading},on:{click:e.batchImportClick}},[e._v("数据导入")]):e._e(),n("input",{ref:"excel-upload-input",staticStyle:{display:"none"},attrs:{type:"file",accept:".xlsx, .xls"},on:{change:e.handleClick}})],1)],1)],1)],1)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("a-table",{attrs:{rowKey:function(t){return t.id},columns:e.tableColumnList,pagination:e.pagination,"data-source":e.tableDataList},on:{change:e.tableChange},scopedSlots:e._u([{key:"name",fn:function(t,a){return n("span",{},["1"==a.otherUnitRemind?n("a-badge",{attrs:{color:"red"}}):e._e(),e._v(" "+e._s(a.surname+a.name)+" ")],1)}},{key:"cardID",fn:function(t,a){return n("span",{},[e._v(e._s(e._f("cardIDShade")(a.cardID)))])}},{key:"professionalPost",fn:function(t,a){return n("span",{},[e._v(e._s(e._f("professionalPostFilter")(a.professionalPost)))])}},{key:"reportType",fn:function(t,a){return n("span",{},[n("a-badge",{attrs:{color:e._f("reportTypeColorFilter")(t),text:e._f("reportTypeFilter")(t)}})],1)}},{key:"state",fn:function(t,a){return n("span",{},[n("a-badge",{attrs:{color:e._f("stateColorFilter")(t),text:e._f("stateFilter")(t)}})],1)}},{key:"operate",fn:function(t,a){return n("span",{staticClass:"ycl-operate"},[e.$route.path.includes("/add")?n("a",{on:{click:function(t){return e.detailsClick("详情",a)}}},[e._v("查看详情")]):n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[e._v(" 选择操作 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{attrs:{href:"javascript:;"}},[n("a",{on:{click:function(t){return e.detailsClick("详情",a)}}},[e._v("查看详情")])])]),a.state!==e.stateList["SUCCESSFUL_FILING"].value||a.reportType!==e.reportTypeList["ADD"].value&&a.reportType!==e.reportTypeList["CHANGE"].value||!e.$route.path.includes("/change")?e._e():n("a-menu-item",[n("a",{on:{click:function(t){return e.detailsClick("变更",a)}}},[e._v("变更备案人员")])]),a.state!==e.stateList["SUCCESSFUL_FILING"].value||a.reportType!==e.reportTypeList["ADD"].value&&a.reportType!==e.reportTypeList["CHANGE"].value||!e.$route.path.includes("/change")?e._e():n("a-menu-item",[n("a",{on:{click:function(t){return e.detailsClick("单位",a)}}},[e._v("变更保管单位")])]),a.state!==e.stateList["SUCCESSFUL_FILING"].value||a.reportType!==e.reportTypeList["ADD"].value&&a.reportType!==e.reportTypeList["CHANGE"].value||!e.$route.path.includes("/undo")?e._e():n("a-menu-item",[n("a",{on:{click:function(t){return e.detailsClick("撤销",a)}}},[e._v("撤销备案人员")])]),a.state===e.stateList["DISMISSED"].value&&a.reportType===e.reportTypeList["ADD"].value&&e.$route.path.includes("/add")?n("a-menu-item",[n("a",{on:{click:function(t){return e.detailsClick("修改",a)}}},[e._v("重新新增")])]):e._e(),a.state===e.stateList["DISMISSED"].value&&a.reportType===e.reportTypeList["CHANGE"].value&&e.$route.path.includes("/change")?n("a-menu-item",[n("a",{on:{click:function(t){return e.detailsClick("修改",a)}}},[e._v("重新变更")])]):e._e(),a.state===e.stateList["DISMISSED"].value&&a.reportType===e.reportTypeList["UNDO"].value&&e.$route.path.includes("/undo")?n("a-menu-item",[n("a",{on:{click:function(t){return e.detailsClick("重新撤销",a)}}},[e._v("重新撤销")])]):e._e()],1)],1)],1)}}])})],1)]),n("a-modal",{attrs:{visible:e.detailsDialogVisible,title:"人员报备详情",width:"800px",destroyOnClose:"",centered:!0,footer:null},on:{cancel:function(t){e.detailsDialogVisible=!1},ok:function(t){e.detailsDialogVisible=!1}}},[n("personnel-report-details",{attrs:{type:e.detailsModalData.type,details:e.detailsModalData.details,close:e.closeClick},on:{showerrorModal:e.showerrorModal}})],1),n("a-modal",{attrs:{visible:e.errorDetailsDialogVisible,title:"数据导入错误信息",width:"800px",destroyOnClose:"",maskClosable:!1,centered:!0,footer:null},on:{cancel:function(t){e.errorDetailsDialogVisible=!1},ok:function(t){e.errorDetailsDialogVisible=!1}}},[n("a-table",{attrs:{columns:e.errorTableColumnList,"data-source":e.errorTableDataList}})],1),n("a-modal",{attrs:{visible:e.errorvisible,footer:null,title:"异常告警信息",width:"500px",destroyOnClose:"",centered:!0},on:{cancel:function(t){e.errorvisible=!1}}},[n("h3",{staticStyle:{"text-align":"center",color:"red"}},[e._v("实人实名核验失败-人员公民身份号码与姓名不符")]),n("div",{staticStyle:{display:"flex"}},[n("a-icon",{staticStyle:{color:"rgb(232,200,5)","font-size":"70px",margin:"10px auto"},attrs:{type:"warning"}})],1),n("p",{staticStyle:{width:"300px","text-align":"center",margin:"20px auto"}},[e._v(" 当前申请人信息(姓名：胡定妹,公民身份号码:330206194309158743经核实与实际人员信息不符，请核对人员姓名与公民身份号码是否为同一人员后再次申请 ")])]),n("a-modal",{attrs:{visible:e.doubleConfirmVisible,footer:null,title:"",width:"500px",destroyOnClose:"",centered:!0},on:{cancel:e.doubleConfirmCancelClick}},[n("h3",{staticStyle:{"text-align":"center"}},[e._v("批量导入数据核查无误，是否保存")]),n("div",{staticStyle:{width:"300px","text-align":"center",margin:"20px auto"}},[n("a-button",{attrs:{type:"primary",loading:e.loadingSave},on:{click:e.handleSuccess}},[e._v("保存")]),n("a-button",{staticStyle:{"margin-left":"18px"},on:{click:e.doubleConfirmCancelClick}},[e._v("取消")])],1)])],1)},s=[],l=(a("99af"),a("a623"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("baa5"),a("fb6a"),a("d3b7"),a("07ac"),a("25f0"),a("2532"),a("159b"),a("ca00")),c=a("1146"),u=a.n(c),p=a("c1df"),d=a.n(p),g=a("946f"),f=a("5bf3"),h=a("166e"),b=a("e56e"),m=a("3705"),y=a("7c5f"),v=a("03b9"),x={0:{text:"主任"},1:{text:"干部"}},k={filters:{reportTypeFilter:function(t){return Object.values(f["a"]).find((function(e){return e.value===t})).text},reportTypeColorFilter:function(t){return Object.values(f["a"]).find((function(e){return e.value===t})).color},stateFilter:function(t){return Object.values(g["a"]).find((function(e){return e.value===t})).text},stateColorFilter:function(t){return Object.values(g["a"]).find((function(e){return e.value===t})).color},professionalPostFilter:function(t){return x[t].text},cardIDShade:l["a"]},data:function(){var t=this;return{loadingSave:!1,query:{},reportTypeList:f["a"],stateList:g["a"],tableColumnList:[{title:"姓名",dataIndex:"name",align:"center",width:"200px",scopedSlots:{customRender:"name"}},{title:"公民身份号码",dataIndex:"cardID",width:"200px",align:"center",scopedSlots:{customRender:"cardID"}},{title:"出生日期",dataIndex:"birthday",width:"200px",align:"center"},{title:"报备类型",dataIndex:"reportType",width:"200px",align:"center",scopedSlots:{customRender:"reportType"}},{title:"工作单位",dataIndex:"workUnit",width:"200px",align:"center"},{title:"职务/职级",dataIndex:"professionalPost",width:"200px",align:"center",scopedSlots:{customRender:"professionalPost"}},{title:"主管单位",dataIndex:"personnelManager",width:"200px",align:"center"},{title:"状态",dataIndex:"state",width:"200px",align:"center",scopedSlots:{customRender:"state"}},{title:"备案操作",dataIndex:"operate",scopedSlots:{customRender:"operate"},width:"200px",align:"center"}],tableDataList:[],pagination:{showSizeChanger:!0,showQuickJumper:!0,pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showTotal:function(e,a){return"共 ".concat(e," 条记录 第").concat(t.pagination.current,"/").concat(Math.ceil(e/t.pagination.pageSize),"页")},onChange:function(e,a){t.pagination.current=e},onShowSizeChange:function(e,a){t.pagination.current=e,t.pagination.pageSize=a}},rankList:[],jobList:[],politicalStatusList:[],educationList:[],tableSelectedRows:[],detailsDialogVisible:!1,detailsModalData:{type:"",details:{}},excelData:{},uploading:!1,downloading:!1,errorDetailsDialogVisible:!1,errorTableColumnList:[{title:"公民身份号码",dataIndex:"cardID",align:"center",width:"200px",scopedSlots:{customRender:"cardID"}},{title:"错误信息",dataIndex:"unSuccessInfo",width:"200px",align:"center"}],errorTableDataList:[],excelColumns:[{header:"公民身份号码（必填）",key:"cardID",width:20,style:{numFmt:"@"}},{header:"姓名（必填）",key:"fullname",width:20,style:{numFmt:null}},{header:"手机号码（必填）",key:"mobilePhone",width:20},{header:"工作单位（必填）",key:"",width:20,style:{numFmt:"@"}},{header:"保管单位（必填）",key:"",width:20,style:{numFmt:"@"}},{header:"职务（必填）",key:"professionalPost",width:20},{header:"政治面貌（必填）",key:"politicalOutlook",width:20},{header:"备注",key:"remarks",width:20,style:{numFmt:"@"}}],errorvisible:!1,errInfo:{},doubleConfirmVisible:!1}},computed:{rowSelection:function(){var t=this;return{onChange:function(e,a){t.tableSelectedRows=a},getCheckboxProps:function(t){return{props:{disabled:"Disabled User"===t.name,name:t.name}}}}}},created:function(){this.pagination.total=this.tableDataList.length,this.getDictionaryProfessionalJob(),this.getDictionaryProfessionalTitle(),this.getDictionaryPoliticalOutlook(),this.getDictionaryEducation()},mounted:function(){},watch:{},methods:{showerrorModal:function(t){this.errInfo=t,this.errorvisible=!0},tableChange:function(t,e,a){var n=Object(r["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.getPersonReport()},getPersonReport:function(){var t=this,e=Object(r["a"])({pageNo:this.pagination.current,pageSize:this.pagination.pageSize,direction:"1",state:this.$route.path.includes("/add")?"":"".concat(g["a"].DISMISSED.value,",").concat(g["a"].SUCCESSFUL_FILING.value),type:f["a"].ADD.value+(this.$route.path.includes("/add")?"":","+f["a"].CHANGE.value)},this.query);Object(h["h"])(e).then((function(e){var a=e.data;t.pagination.total=Number(a.total),t.tableDataList=a.list&&a.list.length?a.list:[]}))},getDictionaryProfessionalJob:function(){var t=this;Object(b["c"])().then((function(e){var a=e.data;if(x={},a.list&&a.list.length){t.jobList=a.list;for(var n=0;n<a.list.length;n++){var i=a.list[n];x[i.value]={text:i.label}}}t.getPersonReport()}))},getDictionaryProfessionalTitle:function(){var t=this;Object(b["d"])().then((function(e){var a=e.data;t.rankList=a.list&&a.list.length?a.list:[]}))},getDictionaryPoliticalOutlook:function(){var t=this;Object(b["b"])().then((function(e){var a=e.data;t.politicalStatusList=a.list&&a.list.length?a.list:[]}))},getDictionaryEducation:function(){var t=this;Object(b["a"])().then((function(e){var a=e.data;t.educationList=a.list&&a.list.length?a.list:[]}))},deleteReport:function(t){var e=this;Object(h["d"])(t).then((function(){e.$message.success("删除备案成功")}))},searchClick:function(){this.pagination.current=1,this.getPersonReport()},batchDeletionClick:function(){this.deletePersonnel()},detailsClick:function(t,e){var a=e||{};if("详情"===t&&"1"==e.otherUnitRemind){var n=[e.id];this.deleteRemindRegistriesOtherunitList(n)}this.detailsDialogVisible=!0,this.detailsModalData.type=t,this.detailsModalData.details=a},getRemindRegistriesOtherunitList:function(){var t=this;Object(v["d"])({pageNo:"1",pageSize:"5",direction:"1"}).then((function(e){t.$store.state.app.warningPersonCount=Number(e.data.total)}))},deleteRemindRegistriesOtherunitList:function(t){var e=this;Object(v["b"])({id:[t]}).then((function(t){})).finally((function(){e.getRemindRegistriesOtherunitList()}))},closeClick:function(){this.detailsDialogVisible=!1,this.detailsModalData={},this.searchClick()},deleteClick:function(t){var e={id:[t.id]};this.deleteReport(e)},batchImportClick:function(){this.$refs["excel-upload-input"].click()},handleSuccess:function(){var t=this;this.loadingSave=!0;var e=this.excelData.results;e.forEach((function(t){t.sex=Number(t.cardID.slice(16,17))%2==0?"女":"男",t.residence=y["a"][t.cardID.slice(0,6)],t.birthday=d()(t.cardID.slice(6,10)+"/"+t.cardID.slice(10,12)+"/"+t.cardID.slice(12,14)).valueOf().toString(),t.birthdayDate=t.birthday})),Object(h["l"])({list:e}).then((function(e){t.loadingSave=!1;var a=e.data,n=[];t.successCount=a.successCount,t.unSuccessCount=a.unSuccessCount;var i=a.unSuccessList?a.unSuccessList:[];i.forEach((function(t){n.push(t)})),a.successCount>"0"&&t.searchClick(),"0"==a.unSuccessCount?(t.$message.success("导入成功"),t.$router.replace(Object(r["a"])(Object(r["a"])({},t.$route),{},{query:Object(r["a"])(Object(r["a"])({},t.$route.query),{},{current:"1"})}))):(t.errorTableDataList=n,t.errorDetailsDialogVisible=!0)})).catch((function(){t.doubleConfirmVisible=!1,t.uploading=!1,t.loadingSave=!1})).finally((function(){t.doubleConfirmVisible=!1,t.uploading=!1}))},generateData:function(t){var e=t.header,a=t.results;this.excelData.header=e,this.excelData.results=a,this.doubleConfirmVisible=!0},handleClick:function(){var t=this.$refs["excel-upload-input"].files[0];t.name.includes(".xlsx")||t.name.includes(".xls")?this.upload(t):this.$message.warning("请选择xlsx或xls文件")},beforeUpload:function(t){return!1},upload:function(t){this.readerData(t)},readerData:function(t){var e=this;this.uploading=!0;var a=new FileReader;a.onload=function(t){var a=t.target.result,n=u.a.read(a,{type:"array",dateNF:"yyyy-mm-dd"}),i=n.SheetNames[0],r=n.Sheets[i],o=e.getHeaderRow(r),s=e.getJsonData(r),l=s.filter((function(t){return!1===t.satify}));e.$refs["excel-upload-input"].value="",l.length>0?(e.errorTableDataList=l,e.errorDetailsDialogVisible=!0,e.uploading=!1):s.length>0?e.generateData({header:o,results:s}):(e.$message.warning("请选择有数据的excel"),e.uploading=!1)},a.readAsArrayBuffer(t)},getHeaderRow:function(t){var e,a=[],n=u.a.utils.decode_range(t["!ref"]),i=n.s.r;for(e=n.s.c;e<=n.e.c;++e){var r=t[u.a.utils.encode_cell({c:e,r:i})],o="UNKNOWN "+e;r&&r.t&&(o=u.a.utils.format_cell(r)),a.push(o)}return this.excelData.header=a,a},getJsonData:function(t){for(var e=this,a=[],n=["cardID","fullname","mobilePhone","workUnit","keepUnit","professionalPost","politicalOutlook","passport","exitEntryPermitForHKMacao","exitEntryPermitForTW","remarks"],i=[0,1,2,3,4,5],o=u.a.utils.decode_range(t["!ref"]),s={},l=function(l){var c={satify:!0,unSuccessInfo:""};c.personnelManager=e.$store.state.app.unitInfo.unitName;for(var p=function(a){var i=t[u.a.utils.encode_cell({c:a,r:l})];switch(c[n[a]]=u.a.utils.format_cell(i),n[a]){case"cardID":c[n[a]]=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|31)|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/.test(c[n[a]])?c[n[a]]:"",c[n[a]]&&s[c[n[a]]]&&(c.unSuccessInfo="重复的公民身份号码"),s[c[n[a]]]=!0;break;case"fullname":case"workUnit":c[n[a]]=/^[\u4e00-\u9fa5]+$/.test(c[n[a]])?c[n[a]]:"","fullname"===n[a]&&c[n[a]]&&(c["surname"]=c[n[a]].slice(0,1),c["name"]=c[n[a]].slice(1,c[n[a]].length));break;case"keepUnit":c[n[a]]=/^[\u4e00-\u9fa5]+$/.test(c[n[a]])?c[n[a]]:"","fullname"===n[a]&&c[n[a]]&&(c["surname"]=c[n[a]].slice(0,1),c["name"]=c[n[a]].slice(1,c[n[a]].length));break;case"mobilePhone":c[n[a]]=/^[1][3-9][0-9]{9}$/.test(c[n[a]])?c[n[a]]:"";break;case"professionalPost":var r=e.jobList.find((function(t){return c[n[a]]===t.label}));c[n[a]]=r?r.value:"";break;case"politicalOutlook":var o=e.politicalStatusList.find((function(t){return c[n[a]]===t.label}));c[n[a]]=o?o.value:"","12"!=c[n[a]]&&"13"!=c[n[a]]||(c["joinPartyDay"]="");break;case"passport":case"exitEntryPermitForHKMacao":case"exitEntryPermitForTW":c[n[a]]="持有"===c[n[a]]?"1":"未持有"===c[n[a]]?"0":"";break;default:break}},d=o.s.c;d<=o.e.c;++d)p(d);c.unSuccessInfo&&(c.unSuccessInfo+="，第".concat(l,"行以下列出现错误："),c.satify=!1);for(var g=0;g<i.length;g++){var f=i[g];if(!c[n[f]]){c.satify=!1,c.unSuccessInfo||(c.unSuccessInfo="第".concat(l,"行以下列出现错误："));try{if(e.excelData.header[f]!==e.excelColumns[f].header)throw!1;c.unSuccessInfo+="".concat(e.excelColumns[f].header.replace("（必填）",""),"，")}catch(b){c.unSuccessInfo="请使用正确的模板";break}}}c.unSuccessInfo.lastIndexOf("：")===c.unSuccessInfo.length-1&&(c.unSuccessInfo=c.unSuccessInfo.replace("第".concat(l,"行以下列出现错误："),"")),c.unSuccessInfo.lastIndexOf("，")===c.unSuccessInfo.length-1&&(c.unSuccessInfo=c.unSuccessInfo.slice(0,c.unSuccessInfo.length-1));var h=Object(r["a"])({},c);delete h.unSuccessInfo,delete h.personnelManager,!h.satify&&Object.values(h).every((function(t){return 0==t}))||a.push(c)},c=o.s.r+1;c<=o.e.r;++c)l(c);return a},doubleConfirmCancelClick:function(){this.doubleConfirmVisible=!1,this.uploading=!1}},components:{personnelReportDetails:m["a"]}},S=k,D=(a("6e38"),a("2877")),C=Object(D["a"])(S,o,s,!1,null,"efc7c74a",null),T=C.exports,I=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("div",{staticClass:"groupPrinting-box"},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{xs:24,lg:8}},[n("a-form-item",{staticClass:"label",attrs:{label:"快速搜索"}},[n("a-input",{attrs:{placeholder:"请输入姓名\\公民身份号码"},on:{blur:e.printingSearchClick},model:{value:e.printingQuery.selectValue,callback:function(t){e.$set(e.printingQuery,"selectValue",t)},expression:"printingQuery.selectValue"}})],1)],1),n("a-col",{attrs:{xs:24,lg:8}},[n("a-button",{on:{click:e.printingSearchClick}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.printingQuery={},t.printingSearchClick()}}},[e._v("重置")]),n("a-button",{staticStyle:{"margin-left":"24px"},attrs:{type:"primary",loading:e.loading},on:{click:e.groupPrintingClick}},[e._v("审核打印")])],1)],1)],1)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("a-table",{attrs:{"row-selection":e.printingTableRowSelection,columns:e.printingTableColumnList,rowKey:function(t){return t.id},pagination:e.printingTablePagination,"data-source":e.printingTableDataList},on:{change:e.printingTableChange},scopedSlots:e._u([{key:"name",fn:function(t,a){return n("span",{},[e._v(e._s(a.surname+a.name))])}},{key:"cardID",fn:function(t,a){return n("span",{},[e._v(e._s(e._f("cardIDShade")(a.cardID)))])}},{key:"professionalPost",fn:function(t,a){return n("span",{},[e._v(" "+e._s(e._f("professionalPostFilter")(a.professionalPost))+" ")])}},{key:"reportType",fn:function(t,a){return n("span",{},[n("a-badge",{attrs:{color:e._f("reportTypeColorFilter")(t),text:e._f("reportTypeFilter")(t)}})],1)}},{key:"operate",fn:function(t,a){return n("span",{staticClass:"ycl-operate"},[n("a",{directives:[{name:"show",rawName:"v-show",value:"报备撤销"!=e.$route.name,expression:"$route.name != '报备撤销'"}],on:{click:function(t){return e.printingDetailsClick("修改",a)}}},[e._v("修改")]),a.reportType===e.reportTypeList["ADD"].value||a.reportType===e.reportTypeList["UNDO"].value?n("a-popconfirm",{attrs:{title:"你真的要删除吗"},on:{confirm:function(t){return e.deleteClick(a)}}},[n("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"close-circle"},slot:"icon"}),n("a",[e._v("删除")])],1):e._e()],1)}}])})],1),n("a-modal",{attrs:{visible:e.printingDialogVisible,title:"人员报备详情",width:"800px",destroyOnClose:"",centered:!0,footer:null},on:{cancel:function(t){e.printingDialogVisible=!1},ok:function(t){e.printingDialogVisible=!1}}},[n("personnel-report-details",{attrs:{type:e.printingModalData.type,details:e.printingModalData.details,close:e.closeClick}})],1)],1),n("Record",{attrs:{printData:e.printData,reload:e.printingSearchClick,activeKey:e.activeKey,state:"新增"}})],1)},_=[],w=(a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("print",{attrs:{loading:t.loading,printing:t.postPackagePrinting,cancel:"1"==t.activeKey?t.deletePackageList:function(){}}},[[a("div",[a("span",[t._v("单据编号："+t._s(t.serialNumber))]),a("div",{staticStyle:{margin:"0px",width:"50px",float:"right"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t._f("creatQrCode")(t.serialNumber)}})])]),a("div",{staticStyle:{"text-align":"center"}},[a("h1",{staticStyle:{"font-weight":"700"}},[t._v("国家工作人员登记备案表（"+t._s(t._f("reportTypeFilter")(t.printData.packageType))+"）")]),a("p",{staticStyle:{display:"flex",margin:"20px 0px 20px -100px"}},[a("span",{staticStyle:{flex:"1",display:"flex"}},[a("span",{staticStyle:{"font-weight":"700",flex:"1","text-align":"right"}},[t._v("报送单位名称(盖章)：")]),a("span",{staticStyle:{flex:"1","text-align":"left"}},[t._v(t._s(t.printData.unitName))])]),a("span",{staticStyle:{flex:"1",display:"flex","margin-left":"-200px"}},[a("span",{staticStyle:{"font-weight":"700",flex:"1","text-align":"right"}},[t._v("组织机构代码：")]),a("span",{staticStyle:{flex:"1","text-align":"left"}},[t._v(t._s(t.printData.unifiedSocialCreditCode))])])]),a("p",{staticStyle:{display:"flex",margin:"20px 0px 20px -100px"}},[a("span",{staticStyle:{flex:"1",display:"flex"}},[a("span",{staticStyle:{"font-weight":"700",flex:"1","text-align":"right"}},[t._v("报送单位联系人：")]),a("span",{staticStyle:{flex:"1","text-align":"left","flex-wrap":"nowrap"}},[t._v(t._s(t.printData.jobContact))])]),a("span",{staticStyle:{flex:"1",display:"flex","margin-left":"-200px"}},[a("span",{staticStyle:{"font-weight":"700",flex:"1","text-align":"right"}},[t._v("联系电话：")]),a("span",{staticStyle:{flex:"1","text-align":"left"}},[t._v(t._s(t.printData.jobPhoneNumber))])])]),a("p",{staticStyle:{display:"flex",margin:"20px 0px 20px -100px"}},[a("span",{staticStyle:{flex:"1",display:"flex"}},[a("span",{staticStyle:{"font-weight":"700",flex:"1","text-align":"right"}},[t._v("单位负责人：")]),a("span",{staticStyle:{flex:"1","text-align":"left","flex-wrap":"nowrap"}})]),a("span",{staticStyle:{flex:"1",display:"flex","margin-left":"-200px"}},[a("span",{staticStyle:{"font-weight":"700",flex:"1","text-align":"right"}},[t._v("填表日期：")]),a("span",{staticStyle:{flex:"1","text-align":"left"}},[t._v(t._s(t.nowDate))])])]),a("table",{staticStyle:{margin:"0 auto","border-collapse":"collapse",padding:"2px"},attrs:{border:"1"}},[a("tr",[a("th",{staticStyle:{padding:"5px 10px 5px 10px",width:"50px"}},[t._v("序号")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px",width:"70px"}},[t._v("姓名")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px",width:"100px"}},[t._v("出生日期")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px",width:"50px"}},[t._v("性别")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v("公民身份号码")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px",width:"130px"}},[t._v("工作单位")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v("职务（级）或职称")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px",width:"120px"}},[t._v("人事主管单位")]),a("th",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v("备注")])]),t._l(t.printData.list,(function(e,n){return a("tr",{key:n},[a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(n+1))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(e.surname+e.name))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(e.birthday))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(e.sex))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(e.cardID))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(e.workUnit))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(t._f("professionalPostObjFilter")(e.professionalPost)))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(e.personnelManager))]),a("td",{staticStyle:{padding:"5px 10px 5px 10px"}},[t._v(t._s(e.remarks))])])}))],2)])]],2)}),P=[],O=a("35db"),L=a("e0d33"),j=a.n(L),$=a("5118"),R={},E={},N={},F={props:{printData:{type:Object,default:{}},reload:{type:Function},activeKey:{type:String},state:{type:String}},filters:{reportTypeFilter:function(t){var e=Object.values(f["a"]).find((function(e){return e.value===t}));return e?e.text:""},professionalTitleFilter:function(t){return E[t]?E[t].text:""},professionalPostObjFilter:function(t){return R[t]?R[t].text:""},statusMapFilter:function(t){return N[t]?N[t].text:""},creatQrCode:function(t){if(t){var e=2,a="L";j.a.stringToBytes=j.a.stringToBytesFuncs["UTF-8"];var n=j()(e,a);return n.addData(t,"Byte"),n.make(),n.createDataURL(2,0)}}},data:function(){return{list:{},jobList:{},reportTypeList:f["a"],nowDate:Object(l["d"])(),loading:!1}},computed:{unitInfo:function(){return this.$store.state.app.unitInfo},serialNumber:function(){return"B"+this.printData.packageID}},created:function(){this.getDictionaryProfessionalJob(),this.getDictionaryProfessionalTitle(),this.getDictionaryUnitType()},mounted:function(){},watch:{},methods:{getDictionaryProfessionalTitle:function(){Object(b["d"])().then((function(t){var e=t.data;if(E={},e.list&&e.list.length)for(var a=0;a<e.list.length;a++){var n=e.list[a];E[n.value]={text:n.label}}}))},getDictionaryProfessionalJob:function(){var t=this;Object(b["c"])().then((function(e){var a=e.data;if(R={},a.list&&a.list.length){t.jobList=a.list;for(var n=0;n<a.list.length;n++){var i=a.list[n];R[i.value]={text:i.label}}}}))},getDictionaryUnitType:function(){Object(b["e"])().then((function(t){var e=t.data;if(N={},e.list&&e.list.length)for(var a=0;a<e.list.length;a++){var n=e.list[a];N[n.value]={text:n.label}}}))},postPackagePrinting:function(){var t=this;this.loading=!0;var e={packageID:this.printData.packageID};Object(h["j"])(e).then((function(e){if(0==e.errorCode){e.data;t.loading=!1,Object($["setTimeout"])((function(){t.$router.replace(Object(r["a"])(Object(r["a"])({},t.$route),{},{query:Object(r["a"])(Object(r["a"])({},t.$route.query),{},{current:"2"})}))}),500)}})).catch((function(){t.loading=!1}))},deletePackageList:function(){var t={packageID:[this.printData.packageID]};Object(h["b"])(t).then((function(t){t.data}))}},components:{print:O["a"]}},A=F,M=(a("cff4"),Object(D["a"])(A,w,P,!1,null,"095d88e0",null)),V=M.exports,z=a("97c8"),U={0:{text:"主任"},1:{text:"干部"}},q={props:{reFresh:{type:Function,default:function(){}}},filters:{reportTypeFilter:function(t){return Object.values(f["a"]).find((function(e){return e.value===t})).text},reportTypeColorFilter:function(t){return Object.values(f["a"]).find((function(e){return e.value===t})).color},professionalPostFilter:function(t){return U[t].text},cardIDShade:l["a"]},data:function(){var t=this;return{loading:!1,activeKey:"1",stateList:g["a"],reportTypeList:f["a"],printingQuery:{},printingTableColumnList:[{title:"姓名",dataIndex:"name",width:"200px",align:"center",scopedSlots:{customRender:"name"}},{title:"公民身份号码",dataIndex:"cardID",width:"200px",align:"center",scopedSlots:{customRender:"cardID"}},{title:"性别",dataIndex:"sex",width:"200px",align:"center"},{title:"出生日期",dataIndex:"birthday",width:"200px",align:"center"},{title:"报备类型",dataIndex:"reportType",width:"200px",align:"center",scopedSlots:{customRender:"reportType"}},{title:"工作单位",dataIndex:"workUnit",width:"200px",align:"center"},{title:"职务/职级",dataIndex:"professionalPost",width:"200px",align:"center",scopedSlots:{customRender:"professionalPost"}},{title:"主管单位",dataIndex:"personnelManager",width:"200px",align:"center"},{title:"操作",dataIndex:"operate",scopedSlots:{customRender:"operate"},width:"200px",align:"center"}],printingTableDataList:[],printingTablePagination:{showSizeChanger:!0,showQuickJumper:!0,pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showTotal:function(e,a){return"共 ".concat(e," 条记录 第").concat(t.printingTablePagination.current,"/").concat(Math.ceil(e/t.printingTablePagination.pageSize),"页")},onChange:function(e,a){t.printingTablePagination.current=e},onShowSizeChange:function(e,a){t.printingTablePagination.current=e,t.printingTablePagination.pageSize=a,t.printingTableSelected=[]}},printingDialogVisible:!1,printingModalData:{},printingTableSelected:[],modifyQuery:{},modifyTableColumnList:[{title:"单据编号",dataIndex:"packageID",align:"center"},{title:"类型",dataIndex:"packageType",align:"center",scopedSlots:{customRender:"packageType"}},{title:"组包人员数量",dataIndex:"personnelNumber",align:"center"},{title:"组包人",dataIndex:"packagePerson",align:"center"},{title:"组包时间",dataIndex:"packageTime",align:"center"},{title:"操作",dataIndex:"operate",align:"center",scopedSlots:{customRender:"operate"}}],modifyTableDataList:[],modifyTablePagination:{showSizeChanger:!0,showQuickJumper:!0,pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showTotal:function(e,a){return"共 ".concat(e," 条记录 第").concat(t.modifyTablePagination.current,"/").concat(Math.ceil(e/t.modifyTablePagination.pageSize),"页")},onChange:function(e,a){t.modifyTablePagination.current=e},onShowSizeChange:function(e,a){t.modifyTablePagination.current=e,t.modifyTablePagination.pageSize=a}},modifyStatusDialogVisible:!1,modifyPackage:{},printAgainQuery:{},printAgainTableColumnList:[{title:"单据编号",dataIndex:"packageID",align:"center"},{title:"类型",dataIndex:"packageType",align:"center",scopedSlots:{customRender:"packageType"}},{title:"组包人员数量",dataIndex:"personnelNumber",align:"center"},{title:"组包人",dataIndex:"packagePerson",align:"center"},{title:"组包时间",dataIndex:"packageTime",align:"center"},{title:"操作",dataIndex:"operate",align:"center",scopedSlots:{customRender:"operate"}}],printAgainTableDataList:[],printAgainTablePagination:{showSizeChanger:!0,showQuickJumper:!0,pageSize:10,current:1,total:0,pageSizeOptions:["10","20","30","40"],showTotal:function(e,a){return"共 ".concat(e," 条记录 第").concat(t.printAgainTablePagination.current,"/").concat(Math.ceil(e/t.printAgainTablePagination.pageSize),"页")},onChange:function(e,a){t.printAgainTablePagination.current=e},onShowSizeChange:function(e,a){t.printAgainTablePagination.current=e,t.printAgainTablePagination.pageSize=a}},printData:{},statusDialogVisible:!1}},computed:{printingTableRowSelection:function(){var t=this;return{selectedRowKeys:this.printingTableSelected.map((function(t){return t.id})),onChange:function(e,a){for(var n=[],i=function(i){var r=e[i],o=t.printingTableSelected.find((function(t){return t.id==r})),s=o||a.find((function(t){return t.id==r}));n.push(s)},r=0;r<e.length;r++)i(r);t.printingTableSelected=n},getCheckboxProps:function(t){return{props:{disabled:"Disabled User"===t.name,name:t.name}}}}}},created:function(){this.printingTablePagination.total=this.printingTableDataList.length,this.modifyTablePagination.total=this.modifyTableDataList.length,this.printAgainTablePagination.total=this.printAgainTableDataList.length,this.getDictionaryProfessionalJob()},mounted:function(){},watch:{},methods:{reFreshCancel:function(){this.reFresh()},tabsChange:function(t){switch(this.activeKey=t,t){case"1":this.getPersonReport();break;case"2":this.modifyGetPackageList();break;case"3":this.printAgainGetPackageList();break;default:break}},printingTableChange:function(t,e,a){var n=Object(r["a"])({},this.printingTablePagination);n.current=t.current,this.pagination=n,this.getPersonReport()},modifyTableChange:function(t,e,a){var n=Object(r["a"])({},this.modifyTablePagination);n.current=t.current,this.pagination=n,this.modifyGetPackageList()},printAgainTableChange:function(t,e,a){var n=Object(r["a"])({},this.printAgainTablePagination);n.current=t.current,this.pagination=n,this.printAgainGetPackageList()},modifyDateChange:function(t,e){this.dateChange(t,e,"modify"),this.modifySearchClick()},printAgainDateChange:function(t,e){this.dateChange(t,e,"printAgain"),this.printAgainSearchClick()},dateChange:function(t,e,a){this[a+"Query"].beginTime=t[0]?t[0].startOf("day").valueOf():"",this[a+"Query"].endTime=t[1]?t[1].endOf("day").valueOf():""},disabledDate:function(t){return t&&t>d()().endOf("day")},getDictionaryProfessionalJob:function(){var t=this;Object(b["c"])().then((function(e){var a=e.data;if(U={},a.list&&a.list.length)for(var n=0;n<a.list.length;n++){var i=a.list[n];U[i.value]={text:i.label}}t.getPersonReport()}))},getPackageInfo:function(t){var e=this;Object(h["f"])(t).then((function(t){if(0==t.errorCode){e.loading=!1;var a=t.data;e.printData=Object(r["a"])(Object(r["a"])({},a),{},{unitName:e.$store.state.app.unitInfo.unitName,unitType:e.$store.state.app.unitInfo.unitType,unifiedSocialCreditCode:e.$store.state.app.unitInfo.unifiedSocialCreditCode,jobContact:e.$store.state.app.unitInfo.jobContact,jobPhoneNumber:e.$store.state.app.unitInfo.jobPhoneNumber,serialNumber:a.packageID}),e.$store.commit("SET_PRINTSHOW",!0)}}))},getPersonReport:function(){var t=this,e=Object(r["a"])(Object(r["a"])({pageNo:this.printingTablePagination.current,pageSize:this.printingTablePagination.pageSize,direction:"1"},this.printingQuery),{},{type:this.$route.path.includes("/add")?f["a"].ADD.value:this.$route.path.includes("/change")?f["a"].CHANGE.value:f["a"].UNDO.value,state:"".concat(g["a"].ADD.value,",").concat(g["a"].EDITED.value,",").concat(g["a"].PACKED.value)});Object(h["h"])(e).then((function(e){var a=e.data;t.printingTablePagination.total=Number(a.total),t.printingTableDataList=a.list&&a.list.length?a.list:[]}))},postPackageList:function(){var t=this;if(this.loading=!0,0===this.printingTableSelected.length)return this.$message.error("请勾选"),void(this.loading=!1);if(!this.printingTableSelected.every((function(e){return e.reportType===t.printingTableSelected[0].reportType})))return this.$message.error("请选择相同的报备类型"),void(this.loading=!1);var e={id:this.printingTableSelected.map((function(t){return t.id})),reportType:this.printingTableSelected[0].reportType};Object(h["i"])(e).then((function(e){var a=e.data,n={packageID:a.packageID};0==e.errorCode&&t.getPackageInfo(n)})).catch((function(){t.loading=!1}))},deleteReport:function(t){var e=this;Object(h["d"])(t).then((function(t){t.data;e.$message.success("删除备案成功"),e.getPersonReport()}))},modifyGetPackageList:function(){var t=this,e=Object(r["a"])(Object(r["a"])({pageNo:this.modifyTablePagination.current,pageSize:this.modifyTablePagination.pageSize,direction:"1"},this.modifyQuery),{},{state:"".concat(g["a"]["PACKED"].value,",").concat(g["a"]["PRINTED"].value,",").concat(g["a"]["COLLECTED"].value)});Object(h["g"])(e).then((function(e){var a=e.data;t.modifyTablePagination.total=Number(a.total),t.modifyTableDataList=a.list&&a.list.length?a.list:[]}))},deletePackageList:function(t){var e=this,a={packageID:t};Object(h["b"])(a).then((function(t){t.data;e.$message.success("拆包成功"),e.modifyGetPackageList()}))},printAgainGetPackageList:function(){var t=this,e=Object(r["a"])(Object(r["a"])({pageNo:this.printAgainTablePagination.current,pageSize:this.printAgainTablePagination.pageSize,direction:"1"},this.printAgainQuery),{},{state:"".concat(g["a"]["PACKED"].value,",").concat(g["a"]["PRINTED"].value,",").concat(g["a"]["COLLECTED"].value)});Object(h["g"])(e).then((function(e){var a=e.data;t.printAgainTablePagination.total=Number(a.total),t.printAgainTableDataList=a.list&&a.list.length?a.list:[]}))},groupPrintingClick:function(){this.postPackageList()},printingSearchClick:function(){this.printingTablePagination.current=1,this.printingTableSelected=[],this.getPersonReport()},printingDetailsClick:function(t,e){var a=e||{};this.printingDialogVisible=!0,this.printingModalData.type=t,this.printingModalData.details=a},closeClick:function(){this.printingDialogVisible=!1,this.printingModalData={},this.printingSearchClick()},deleteClick:function(t){var e={id:[t.id]};this.deleteReport(e)},modifySearchClick:function(){this.modifyTablePagination.current=1,this.modifyGetPackageList()},unpackCilck:function(t){this.deletePackageList([t.packageID])},modifyDetailsClick:function(t){this.modifyPackage=t,this.modifyStatusDialogVisible=!0},printAgainSearchClick:function(){this.printAgainTablePagination.current=1,this.printAgainGetPackageList()},printAgainClick:function(t){var e={packageID:t.packageID};this.getPackageInfo(e)}},components:{Record:V,packageDetails:z["a"],personnelReportDetails:m["a"]}},G=q,Q=(a("03b7"),Object(D["a"])(G,I,_,!1,null,"17d9b190",null)),K=Q.exports,J=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("a-tabs",{attrs:{tabPosition:"left","default-active-key":"1"}},[n("a-tab-pane",{key:"1",attrs:{tab:"常规备案"}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"快速搜索"}},[n("a-input",{attrs:{placeholder:"请输入姓名\\公民身份号码"},on:{blur:e.searchClick},model:{value:e.query.selectValue,callback:function(t){e.$set(e.query,"selectValue",t)},expression:"query.selectValue"}})],1)],1),n("a-col",{attrs:{md:6,sm:24}},[n("a-button",{on:{click:e.searchClick}},[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.query={},t.searchClick()}}},[e._v("重置")])],1)],1)],1)],1),n("a-table",{attrs:{rowKey:function(t){return t.packageID},columns:e.columns,"data-source":e.tableDataList,pagination:e.pagination,customRow:e.setRow,rowClassName:function(e){return e.orderNo==t.noworderno?"table-row-check":""}},on:{change:e.tableChange},scopedSlots:e._u([{key:"packageType",fn:function(t,a){return n("span",{},[n("a-badge",{attrs:{color:e._f("reportTypeColorFilter")(t),text:e._f("reportTypeFilter")(t)}})],1)}},{key:"state",fn:function(t,a){return n("span",{},[n("a-badge",{attrs:{color:e._f("stateColorFilter")(t),text:e._f("stateFilter")(t)}})],1)}},{key:"action",fn:function(t,a){return n("span",{},[a.state==e.stateObj["PRINTED"].value?n("a",{on:{click:function(t){return e.showModalClick(a)}}},[e._v("数据提交")]):e._e(),a.state==e.stateObj["COLLECTED"].value?n("a",{on:{click:function(t){return e.reportClick(a)}}},[e._v("上报")]):e._e(),a.state==e.stateObj["COLLECTED"].value?n("a",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.showModalClick(a)}}},[e._v("档案详细")]):e._e(),a.state<e.stateObj["SUBMITTED"].value?n("a",{attrs:{type:"link"},on:{click:function(t){return e.printAgainClick(a)}}},[e._v("重打")]):e._e(),n("a-popconfirm",{attrs:{title:"你真的要删除吗"},on:{confirm:function(t){return e.unpackCilck(a)}}},[n("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"close-circle"},slot:"icon"}),a.state<e.stateObj["SUBMITTED"].value?n("a",{attrs:{type:"link"}},[e._v("删除")]):e._e()],1)],1)}}])})],1),n("a-tab-pane",{key:"2",attrs:{tab:"浙政钉","force-render":""}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"快速搜索"}},[n("a-input",{attrs:{placeholder:"请输入姓名\\公民身份号码"},model:{value:e.query.selectValue,callback:function(t){e.$set(e.query,"selectValue",t)},expression:"query.selectValue"}})],1)],1),n("a-col",{attrs:{md:10,sm:24}},[n("a-form-item",{attrs:{label:"组包时间"}},[n("a-range-picker",{attrs:{"disabled-date":e.disabledDate},model:{value:e.query.date,callback:function(t){e.$set(e.query,"date",t)},expression:"query.date"}})],1)],1),n("a-col",{attrs:{md:6,sm:24}},[n("a-button",[e._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")])],1)],1)],1)],1),n("a-table",{attrs:{rowKey:function(t){return t.packageID},columns:e.columns,"data-source":e.tableDataListZZT,pagination:e.pagination}})],1)],1),e.statusDialogVisible?n("package-details",{attrs:{title:e.$route.meta.title,packageID:e.electronic.packageID,visible:e.statusDialogVisible,canSave:!0,state:e.electronic.state,saveCallback:e.reportClick,close:function(){t.statusDialogVisible=!1}}}):e._e(),n("Record",{attrs:{printData:e.printData,reload:e.printingSearchClick,activeKey:"3",state:"新增"}})],1)},H=[],B=(a("c740"),a("45fc"),a("ddb0"),{COLLECTED:{current:1,values:[g["a"]["COLLECTED"].value],title:"报备纸质文件扫描"},SUBMITTED:{current:2,values:[g["a"]["SUBMITTED"].value,g["a"]["DISMISSED"].value,g["a"]["SUCCESSFUL_FILING"].value],title:"数据提交"}}),W=[{title:"单据编号",dataIndex:"packageID",width:"200px",align:"center"},{title:"报备类型",dataIndex:"packageType",width:"200px",align:"center",scopedSlots:{customRender:"packageType"}},{title:"状态",dataIndex:"state",width:"200px",align:"center",scopedSlots:{customRender:"state"}},{title:"报备人员数量",dataIndex:"personnelNumber",width:"200px",align:"center"},{title:"打印时间",dataIndex:"packageTime",width:"200px",align:"center"},{title:"操作",dataIndex:"action",align:"center",width:"200px",scopedSlots:{customRender:"action"}}];function Z(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}var X={filters:{reportTypeFilter:function(t){return Object.values(f["a"]).find((function(e){return e.value===t})).text},reportTypeColorFilter:function(t){return Object.values(f["a"]).find((function(e){return e.value===t})).color},stateFilter:function(t){return Object.values(g["a"]).find((function(e){return e.value===t})).text},stateColorFilter:function(t){return Object.values(g["a"]).find((function(e){return e.value===t})).color},stepStateFilter:function(t){try{var e=Object.values(B).find((function(e){return e.values.some((function(e){return e===t}))})).current;return e||0}catch(a){return 0}}},data:function(){var t=this;return this.columns=W,{query:{},tableDataList:[],tableDataListZZT:[],statusDialogVisible:!1,loading:!1,imageUrl:"",electronic:{list:[]},pagination:{pageSize:10,total:0,current:1,showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录 第").concat(t.pagination.current,"/").concat(Math.ceil(e/t.pagination.pageSize),"页")},onChange:function(e,a){t.pagination.current=e},onShowSizeChange:function(e,a){t.pagination.pageSize=a,t.pagination.current=e}},stateObj:g["a"],noworderno:"",stepStateList:B,stepCurrent:"0",record:{},printData:{}}},created:function(){this.getPackageList()},computed:{},methods:{tableChange:function(t,e,a){var n=Object(r["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.getPackageList()},disabledDate:function(t){return t&&t>d()().endOf("day")},dateChange:function(t,e){this.query.beginTime=t[0]?t[0].startOf("day").valueOf():"",this.query.endTime=t[1]?t[1].endOf("day").valueOf():"",this.searchClick()},handleCancel:function(){this.statusDialogVisible=!1},handleOk:function(){this.putElectronicInfo()},handleChange:function(t){var e=this;this.imageUrl="","uploading"===t.file.status&&(this.loading=!0,Z(t.file.originFileObj,(function(t){e.loading=!1,e.electronic.image=t})))},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;e||this.$message.error("You can only upload JPG file!");var a=t.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),e&&a},getPersonReport:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this,e=Object(r["a"])(Object(r["a"])({pageNo:this.printingTablePagination.current,pageSize:this.printingTablePagination.pageSize,direction:"1"},this.printingQuery),{},{state:"".concat(g["a"].ADD.value,",").concat(g["a"].EDITED.value)});getPersonReport(e).then((function(e){var a=e.data;t.printingTablePagination.total=Number(a.total),t.printingTableDataList=a.list&&a.list.length?a.list:[]}))})),getPackageList:function(){var t=this,e=Object(r["a"])({pageNo:this.pagination.current,pageSize:this.pagination.pageSize,direction:"1",state:"".concat(g["a"]["PRINTED"].value,",").concat(g["a"]["COLLECTED"].value),category:this.$route.path.includes("/add")?f["a"].ADD.value:this.$route.path.includes("/change")?f["a"].CHANGE.value:f["a"].UNDO.value},this.query);Object(h["g"])(e).then((function(e){var a=e.data;t.pagination.total=Number(a.total),t.tableDataList=a.list&&a.list.length?a.list:[];var n=t.tableDataList.findIndex((function(e){return e.orderNo==t.noworderno}));t.noworderno=-1!==n?t.tableDataList[n].orderNo:"",t.stepCurrent=-1!==n?t.tableDataList[n].state:""}))},getElectronicInfo:function(t){var e=this;Object(h["e"])(t).then((function(a){var n=a.data;e.electronic=n,e.electronic.packageID=t.packageID,e.electronic.image?e.electronic.image=e.$store.state.app.picturePrefixAddress+e.electronic.image:e.electronic.image="",e.statusDialogVisible=!0}))},putElectronicInfo:function(){var t=this,e={packageID:this.electronic.packageID,image:this.electronic.image.replace(/^data:image\/\w+;base64,/,"")};Object(h["n"])(e).then((function(e){t.statusDialogVisible=!1,t.searchClick()}))},deletePackageList:function(t){var e=this,a={packageID:t};Object(h["b"])(a).then((function(t){e.$message.success("拆包成功"),e.getPackageList()}))},getPackageInfo:function(t){var e=this;Object(h["f"])(t).then((function(t){var a=t.data;e.printData=Object(r["a"])(Object(r["a"])({},a),{},{unitName:e.$store.state.app.unitInfo.unitName,unitType:e.$store.state.app.unitInfo.unitType,unifiedSocialCreditCode:e.$store.state.app.unitInfo.unifiedSocialCreditCode,jobContact:e.$store.state.app.unitInfo.jobContact,jobPhoneNumber:e.$store.state.app.unitInfo.jobPhoneNumber}),e.$store.commit("SET_PRINTSHOW",!0)}))},postSubmitList:function(t){var e=this;this.disabled=!0,Object(h["m"])(t).then((function(t){e.$message.success("提交成功"),e.disabled=!1,e.searchClick()})).finally((function(){e.disabled=!1}))},showModalClick:function(t){this.electronic=t,this.statusDialogVisible=!0},searchClick:function(){this.pagination.current=1,this.getPackageList()},reportClick:function(t){t&&(this.electronic=t);var e={packageID:[this.electronic.packageID]};this.postSubmitList(e)},setRow:function(t){var e=this;return{on:{click:function(a){e.noworderno=t.packageID,e.stepCurrent=t.state}}}},unpackCilck:function(t){this.deletePackageList([t.packageID])},printAgainClick:function(t){var e={packageID:t.packageID};this.getPackageInfo(e)},printingSearchClick:function(){this.pagination.current=1,this.printingTableSelected=[],this.getPersonReport()}},components:{packageDetails:z["a"],Record:V}},Y=X,tt=(a("81196"),Object(D["a"])(Y,J,H,!1,null,"51782a58",null)),et=tt.exports,at=a("6250"),nt={name:"",data:function(){return{current:this.$route.query.current?Number(this.$route.query.current):0,stepStyle:{marginBottom:"20px",boxShadow:"0px -1px 0 0 #e8e8e8 inset"},alive:!0,nextVisible:!1,nextMessage:"",nextMessageObj:{1:{message:"已完成数据录入，点击确定开始数据审核。请选择人员进行审核打印。"},2:{message:"已完成数据审核，点击确定开始数据提交。请点击数据提交，选择pdf文件上传并点击提交以完成数据提交。"}},routerName:""}},watch:{"$route.query.current":function(){this.$route.query.current?(this.nextVisible=!0,this.nextMessage=this.nextMessageObj[this.$route.query.current]?this.nextMessageObj[this.$route.query.current].message:"点击确定进行下一步操作"):this.current=0}},methods:{reFresh:function(){},nextCancelClick:function(){this.nextVisible=!1,this.current=0},nextConfirmClick:function(){this.nextVisible=!1,this.current=Number(this.$route.query.current)},tabsChange:function(t){this.$route.query.current&&this.$router.replace({query:Object(r["a"])(Object(r["a"])({},this.$route.query),{},{current:void 0})}),this.$nextTick((function(){this.current=t}))}},components:{personnelReportCom:T,groupPrintingCom:K,electronicFileCom:et,help:at["a"]},beforeRouteEnter:function(t,e,a){t.path!==e.path?a((function(e){e.current=0,e.alive=!1,e.routerName=t.name,e.$nextTick((function(){e.alive=!0}))})):a()}},it=nt,rt=Object(D["a"])(it,n,i,!1,null,"21ecddd8",null);e["default"]=rt.exports},6017:function(t,e,a){(function(t,e){(function(t,a){"use strict";if(!t.setImmediate){var n,i=1,r={},o=!1,s=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?g():f()?h():t.MessageChannel?b():s&&"onreadystatechange"in s.createElement("script")?m():y(),l.setImmediate=c,l.clearImmediate=u}function c(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var o={callback:t,args:e};return r[i]=o,n(i),i++}function u(t){delete r[t]}function p(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(a,n);break}}function d(t){if(o)setTimeout(d,0,t);else{var e=r[t];if(e){o=!0;try{p(e)}finally{u(t),o=!1}}}}function g(){n=function(t){e.nextTick((function(){d(t)}))}}function f(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}function h(){var e="setImmediate$"+Math.random()+"$",a=function(a){a.source===t&&"string"===typeof a.data&&0===a.data.indexOf(e)&&d(+a.data.slice(e.length))};t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(a){t.postMessage(e+a,"*")}}function b(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;d(e)},n=function(e){t.port2.postMessage(e)}}function m(){var t=s.documentElement;n=function(e){var a=s.createElement("script");a.onreadystatechange=function(){d(e),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function y(){n=function(t){setTimeout(d,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,a("c8ba"),a("4362"))},"6e38":function(t,e,a){"use strict";var n=a("cf3f"),i=a.n(n);i.a},81196:function(t,e,a){"use strict";var n=a("a8bf"),i=a.n(n);i.a},9768:function(t,e,a){},a0ef:function(t,e,a){},a8bf:function(t,e,a){},cf3f:function(t,e,a){},cff4:function(t,e,a){"use strict";var n=a("a0ef"),i=a.n(n);i.a}}]);