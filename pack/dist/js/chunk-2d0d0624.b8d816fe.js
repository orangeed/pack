(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0624"],{"686b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-header-wrapper"),a("a-card",{staticStyle:{"margin-top":"24px"}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{sm:24,xl:8}},[a("a-form-item",{attrs:{label:"快速搜索"}},[a("a-input",{attrs:{placeholder:"请输入单位名称"},model:{value:e.params.selectValue,callback:function(t){e.$set(e.params,"selectValue",t)},expression:"params.selectValue"}})],1)],1),a("a-col",{attrs:{sm:24,xl:8}},[a("a-form-item",{attrs:{label:"单位性质"}},[a("a-select",{staticStyle:{"min-width":"180px"},attrs:{allowClear:"",placeholder:"请选择单位性质"},on:{change:e.stateHandleChange},model:{value:e.params.stateType,callback:function(t){e.$set(e.params,"stateType",t)},expression:"params.stateType"}},e._l(e.stateTypeOptions,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{sm:24,xl:8}},[a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:e.reset}},[e._v("重置")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.addUnit}},[e._v("+ 新建")])],1)],1)],1)],1)],1),a("a-table",{staticStyle:{"margin-top":"24px"},attrs:{dataSource:e.dataSource,pagination:e.pagination}},[a("a-table-column",{key:"unitName",attrs:{align:"center",title:"单位名称","data-index":"unitName"}}),a("a-table-column",{key:"unifiedSocialCreditCode",attrs:{title:"统一社会信用代码",align:"center","data-index":"unifiedSocialCreditCode"}}),a("a-table-column",{key:"unitTypeName",attrs:{align:"center",title:"单位类型","data-index":"unitTypeName"}}),a("a-table-column",{attrs:{align:"center",title:"单位性质"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a-tag",{attrs:{color:"#108ee9"}},[e._v(e._s(e._f("stateTypeOption")(t.stateType)))])]}}])}),a("a-table-column",{key:"unitAddress",attrs:{align:"center",title:"单位地址","data-index":"unitAddress"}}),a("a-table-column",{key:"jobContact",attrs:{align:"center",title:"工作联系人","data-index":"jobContact"}}),a("a-table-column",{key:"jobPhoneNumber",attrs:{align:"center",title:"联系方式","data-index":"jobPhoneNumber"}}),a("a-table-column",{key:"administrativeAreaCode",attrs:{title:"行政区域编码",align:"center","data-index":"administrativeAreaCode"}}),a("a-table-column",{key:"action",attrs:{align:"center",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t,i){return[a("span",[a("a",{on:{click:function(t){return e.editUnit(i)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否删除本条信息","ok-text":"删除","cancel-text":"取消"},on:{confirm:function(t){return e.deleteUnit(i.id)}}},[a("a",[e._v("删除")])])],1)]}}])})],1)],1),a("a-modal",{attrs:{title:e.modelConfig.title,visible:e.modelConfig.visible,"confirm-loading":e.modelConfig.confirmLoading,footer:null},on:{cancel:e.handleCancel}},[a("a-form-model",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-col":{span:8},"wrapper-col":{span:14}}},[a("a-form-model-item",{attrs:{label:"单位名称",prop:"unitName"}},[a("a-input",{attrs:{placeholder:"请输入单位名称"},model:{value:e.form.unitName,callback:function(t){e.$set(e.form,"unitName",t)},expression:"form.unitName"}})],1),a("a-form-model-item",{attrs:{label:"统一社会信用代码",prop:"unifiedSocialCreditCode"}},[a("a-input",{attrs:{placeholder:"请输入统一社会信用代码","max-length":18},on:{change:function(t){return e.unitIsActived(e.form.unifiedSocialCreditCode)}},model:{value:e.form.unifiedSocialCreditCode,callback:function(t){e.$set(e.form,"unifiedSocialCreditCode",t)},expression:"form.unifiedSocialCreditCode"}})],1),a("a-form-model-item",{attrs:{label:"单位选择",prop:"stateType"}},[a("a-select",{attrs:{placeholder:"请进行单位选择"},model:{value:e.form.stateType,callback:function(t){e.$set(e.form,"stateType",t)},expression:"form.stateType"}},e._l(e.stateTypeOptions,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"单位类型",prop:"unitType"}},[a("a-select",{attrs:{placeholder:"请选择单位类型"},model:{value:e.form.unitType,callback:function(t){e.$set(e.form,"unitType",t)},expression:"form.unitType"}},e._l(e.unitTypeOptions,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"工作联系人",prop:"jobContact"}},[a("a-input",{attrs:{placeholder:"请输入工作联系人"},model:{value:e.form.jobContact,callback:function(t){e.$set(e.form,"jobContact",t)},expression:"form.jobContact"}})],1),a("a-form-model-item",{attrs:{label:"联系方式",prop:"jobPhoneNumber"}},[a("a-input",{attrs:{placeholder:"请输入联系方式","max-length":13},model:{value:e.form.jobPhoneNumber,callback:function(t){e.$set(e.form,"jobPhoneNumber",t)},expression:"form.jobPhoneNumber"}})],1),a("a-form-model-item",{attrs:{label:"行政区域编码",prop:"administrativeAreaCode"}},[a("a-input",{attrs:{placeholder:"请输入行政区域编码","max-length":6},model:{value:e.form.administrativeAreaCode,callback:function(t){e.$set(e.form,"administrativeAreaCode",t)},expression:"form.administrativeAreaCode"}})],1),a("a-form-model-item",{attrs:{label:"单位地址",prop:"unitAddress"}},[a("a-input",{attrs:{placeholder:"请输入单位地址"},model:{value:e.form.unitAddress,callback:function(t){e.$set(e.form,"unitAddress",t)},expression:"form.unitAddress"}})],1)],1),a("div",{staticStyle:{width:"300px","text-align":"center",margin:"20px auto"}},[a("a-button",{on:{click:e.handleCancel}},[e._v("取消")]),a("a-button",{staticStyle:{"margin-left":"18px"},attrs:{type:"primary",disabled:e.disabled},on:{click:e.handleOk}},[e._v("确定")])],1)],1)],1)},n=[],o=(a("99af"),a("4160"),a("a9e3"),a("d3b7"),a("25f0"),a("498a"),a("159b"),a("5530")),r=a("e56e"),l=a("9109"),s=a("7b0a"),c=[{value:"0",label:"工作单位"},{value:"1",label:"证件保管单位"}],d={stateTypeOption:function(e){if(e)return c[e].label}},u={filters:d,props:{},data:function(){var e=this;return{disabled:!1,stateTypeOptions:c,dataSource:[{id:1,stateType:1}],params:{selectValue:"",stateType:void 0},modelConfig:{isAdd:!0,title:"新增单位",visible:!1,confirmLoading:!1},unitTypeOptions:{},form:{},pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showTotal:function(t){return"共 ".concat(t," 条记录 第").concat(e.pagination.current,"/").concat(Math.ceil(t/e.pagination.pageSize),"页")},onChange:function(t,a){e.pagination.current=t,e.getList()},onShowSizeChange:function(t,a){e.pagination.current=t,e.pagination.pageSize=a,e.getList()}},rules:{unitName:[{required:!0,message:"请输入单位名称",trigger:"blur"},s["e"]],unifiedSocialCreditCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"},{trigger:"blur",message:"请输入18位统一社会信用代码",min:18,max:18},s["g"]],stateType:[{required:!0,message:"请进行单位选择",trigger:"change"}],unitType:[{required:!0,message:"请选择单位类型",trigger:"change"}],jobContact:[{required:!0,message:"请输入工作联系人",trigger:"change"},s["e"]],jobPhoneNumber:[{required:!0,trigger:"blur",message:"请输入工作联系电话"},s["a"]],administrativeAreaCode:[{required:!0,message:"请输入行政区域编码",trigger:"blur"},{trigger:"blur",message:"请输入6位行政区域编码",min:6,max:6},s["d"]],unitAddress:[{required:!0,message:"请输入单位地址",trigger:"blur"}]}}},computed:{},created:function(){this.init()},mounted:function(){},watch:{},methods:{init:function(){this.getDictionaryUnitType()},getDictionaryUnitType:function(){var e=this;Object(r["e"])().then((function(t){0==t.errorCode&&t.data&&(e.unitTypeOptions=t.data.list,e.getList())}))},stateHandleChange:function(){},reset:function(){this.params.selectValue="",this.params.stateType=void 0,this.getList()},search:function(){this.pagination.current=1,this.getList()},getList:function(){var e=this,t=Object(o["a"])(Object(o["a"])({},this.params),{},{pageNo:this.pagination.current,pageSize:this.pagination.pageSize,direction:"1"});Object(l["b"])(t).then((function(t){0==t.errorCode&&t.data&&(e.unitTypeOptions.forEach((function(e){t.data.list&&t.data.list.length&&t.data.list.forEach((function(t){e.value==t.unitType&&(t.unitTypeName=e.label)}))})),e.dataSource=t.data.list,e.pagination.total=Number(t.data.total))}))},addUnit:function(){this.modelConfig={isAdd:!0,title:"新增单位",visible:!0}},editUnit:function(e){this.modelConfig={isAdd:!1,title:"编辑单位",visible:!0},e.id=e.id.toString(),this.form=Object(o["a"])({},e)},deleteUnit:function(e){var t=this;Object(l["a"])({id:e.toString()}).then((function(e){0==e.errorCode&&(t.$message.success("删除成功！"),t.getList())}))},handleOk:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.disabled=!1,e.modelConfig.isAdd?Object(l["c"])(e.form).then((function(t){0==t.errorCode&&(e.$message.success("添加成功！"),e.modelConfig.visible=!1,e.getList(),e.form={})})):Object(l["d"])(e.form).then((function(t){0==t.errorCode&&(e.$message.success("修改成功！"),e.modelConfig.visible=!1,e.getList(),e.form={})})))}))},handleCancel:function(){this.disabled=!1,this.modelConfig.visible=!1,this.form={}},unitIsActived:function(e){var t=this;e.trim().length>=18&&Object(l["e"])({unitCode:e.trim()}).then((function(e){0==e.errorCode&&(t.$message.success("该单位已经激活，可以新增"),t.disabled=!1)})).catch((function(e){t.$message.warning("该单位尚未激活，请先激活！"),t.disabled=!0}))}},components:{}},m=u,p=a("2877"),f=Object(p["a"])(m,i,n,!1,null,"399ede5a",null);t["default"]=f.exports}}]);