(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e907b"],{"8c93":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("page-header-wrapper",[t("a-card",[t("a-form-model",{ref:"form",attrs:{model:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules}},[t("a-form-model-item",{attrs:{label:"单位名称",prop:"unitName"}},[t("a-input",{model:{value:e.form.unitName,callback:function(r){e.$set(e.form,"unitName",r)},expression:"form.unitName"}})],1),t("a-form-model-item",{attrs:{label:"统一社会信用代码",prop:"unifiedSocialCreditCode"}},[t("a-input",{attrs:{disabled:""},model:{value:e.form.unifiedSocialCreditCode,callback:function(r){e.$set(e.form,"unifiedSocialCreditCode",r)},expression:"form.unifiedSocialCreditCode"}})],1),t("a-form-model-item",{attrs:{label:"上级主管单位名称",prop:"superiorSupervisorName"}},[t("a-input",{model:{value:e.form.superiorSupervisorName,callback:function(r){e.$set(e.form,"superiorSupervisorName",r)},expression:"form.superiorSupervisorName"}})],1),t("a-form-model-item",{attrs:{label:"单位类型",prop:"unitType"}},[t("a-select",{model:{value:e.form.unitType,callback:function(r){e.$set(e.form,"unitType",r)},expression:"form.unitType"}},e._l(e.statusMap,(function(r,a){return t("a-select-option",{key:a,attrs:{value:r.value}},[e._v(" "+e._s(r.label)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"工作联系人",prop:"jobContact"}},[t("a-input",{model:{value:e.form.jobContact,callback:function(r){e.$set(e.form,"jobContact",r)},expression:"form.jobContact"}})],1),t("a-form-model-item",{attrs:{label:"工作联系电话",prop:"jobPhoneNumber"}},[t("a-input",{attrs:{"max-length":13},model:{value:e.form.jobPhoneNumber,callback:function(r){e.$set(e.form,"jobPhoneNumber",r)},expression:"form.jobPhoneNumber"}})],1),t("a-form-model-item",{attrs:{label:"工作联系人公民身份证号:",prop:"cardID"}},[t("a-input",{attrs:{"max-length":18},model:{value:e.form.cardID,callback:function(r){e.$set(e.form,"cardID",r)},expression:"form.cardID"}})],1),t("a-form-model-item",{attrs:{label:"行政区域编码",prop:"administrativeAreaCode"}},[t("a-input",{model:{value:e.form.administrativeAreaCode,callback:function(r){e.$set(e.form,"administrativeAreaCode",r)},expression:"form.administrativeAreaCode"}})],1),t("a-form-model-item",{attrs:{label:"开通模块:",prop:"selectList"}},[t("a-checkbox-group",{attrs:{options:e.openingFunctionOptions},model:{value:e.form.selectList,callback:function(r){e.$set(e.form,"selectList",r)},expression:"form.selectList"}})],1),t("a-form-model-item",{attrs:{label:"应用是否激活:"}},[t("a-switch",{attrs:{"default-checked":"",disabled:""},model:{value:e.form.appActive,callback:function(r){e.$set(e.form,"appActive",r)},expression:"form.appActive"}})],1),t("a-form-model-item",{attrs:{label:"备案单位是否报备:"}},[t("a-switch",{attrs:{"default-checked":"",disabled:""},model:{value:e.form["2CActive"],callback:function(r){e.$set(e.form,"2CActive",r)},expression:"form['2CActive']"}})],1),t("a-form-model-item",{attrs:{label:"领用单位是否报备:"}},[t("a-switch",{attrs:{"default-checked":"",disabled:""},model:{value:e.form["2AActive"],callback:function(r){e.$set(e.form,"2AActive",r)},expression:"form['2AActive']"}})],1),t("a-form-model-item",{attrs:{label:"Ukey序列号",prop:"ukey"}},[t("a-input",{attrs:{disabled:""},model:{value:e.form.ukey,callback:function(r){e.$set(e.form,"ukey",r)},expression:"form.ukey"}})],1),t("a-form-model-item",{attrs:{label:"保管柜序列号",prop:"safekeepingCabinetSerialNumber"}},[t("a-input",{attrs:{"max-length":8},on:{change:function(r){return e.darwerState(e.form.safekeepingCabinetSerialNumber)}},model:{value:e.form.safekeepingCabinetSerialNumber,callback:function(r){e.$set(e.form,"safekeepingCabinetSerialNumber",r)},expression:"form.safekeepingCabinetSerialNumber"}})],1),t("a-form-model-item",{attrs:{label:"备注"}},[t("a-input",{model:{value:e.form.remark,callback:function(r){e.$set(e.form,"remark",r)},expression:"form.remark"}})],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:6,offset:12}}},[t("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)],1)],1)},o=[],i=(t("caad"),t("2532"),t("498a"),t("5530")),s=t("8593"),n=t("e56e"),l=t("7b0a"),m=(t("b687"),{props:{},data:function(){var e=this,r=function(r,t,a){t.includes("1")?e.form.openingModule1="1":e.form.openingModule1="0",t.includes("2")?e.form.openingModule2="1":e.form.openingModule2="0",t.includes("3")?e.form.openingModule3="1":e.form.openingModule3="0",t.includes("3")&&!t.includes("2")?a(new Error("选择证件保管柜必须选择证件管理")):t.includes("1")||t.includes("2")?a():a(new Error("至少选择证件管理或登记备案")),e.form=Object(i["a"])({},e.form)};return{labelCol:{span:6,offset:2},wrapperCol:{span:10},form:{},statusMap:[],openingFunctionOptions:[{label:"登记备案",value:"1",disabled:!0},{label:"证件管理",value:"2",disabled:!0},{label:"证件保管",value:"3"}],rules:{selectList:[{type:"array",validator:r,trigger:"change"},{required:!0,trigger:"change",message:"请选择模块"}],unitName:[{required:!0,trigger:"blur",message:"请输入单位名称"},l["e"]],unifiedSocialCreditCode:[{required:!0,trigger:"blur",message:"请输入统一社会信用代码"},{trigger:"blur",message:"请输入18位统一社会信用代码",min:18,max:18},l["g"]],organizationCodeSuperiorCompetentUnit:[{required:!0,trigger:"blur",message:"请输入上级主管单位组织机构代码"},{trigger:"blur",message:"请输入18位单位组织机构代码",min:18,max:18},l["g"]],superiorSupervisorName:[{required:!0,trigger:"blur",message:"请输入上级主管单位名称"},l["e"]],unitType:[{required:!0,trigger:"change",message:"请选择单位类型"}],jobContact:[{required:!0,trigger:"blur",message:"请输入工作联系人"},l["e"]],jobPhoneNumber:[{required:!0,trigger:"blur",message:"请输入工作联系电话"},l["a"]],administrativeAreaCode:[{required:!0,trigger:"blur",message:"请输入行政区域编码"},l["d"],{trigger:"blur",message:"请输入6位行政区域编码",min:6,max:6}],safekeepingCabinetSerialNumber:[l["c"]],cardID:[{required:!0,trigger:"change",message:"请输入公民身份证号码"},l["b"]]}}},computed:{},created:function(){var e=this;Object(s["c"])().then((function(r){0==r.errorCode?(r.data.appActive="0"!=r.data.appActive,r.data["2CActive"]="0"!=r.data["2CActive"],r.data["2AActive"]="0"!=r.data["2AActive"],e.form=Object(i["a"])({},r.data)):e.form=Object(i["a"])({},e.$store.state.app.unitInfo),e.form.selectList=[],"1"==e.form.openingModule1&&e.form.selectList.push("1"),"1"==e.form.openingModule2&&e.form.selectList.push("2"),"1"==e.form.openingModule3&&e.form.selectList.push("3")})),Object(n["e"])().then((function(r){e.statusMap=r.data.list}))},watch:{},methods:{onSubmit:function(){var e=this;this.form.selectList.includes("1")&&(this.form.openingModule1="1"),this.form.selectList.includes("2")&&(this.form.openingModule2="1"),this.form.selectList.includes("3")&&(this.form.openingModule3="1");var r=this.form;this.$refs["form"].validate((function(t){if(t){if(e.form.safekeepingCabinetSerialNumber&&e.form.safekeepingCabinetSerialNumber.length<8)return void e.$message.warning("请填写8位有效保管柜序列号！");Object(s["e"])(r).then((function(t){0==t.errorCode&&(e.$store.commit("SET_UNIT_INFO",Object(i["a"])({},r)),e.$message.success("提交成功"))}))}}))},darwerState:function(e){var r=this;e.trim().length>=8&&Object(s["a"])({deviceCode:e.trim()}).then((function(e){0==e.errorCode&&r.$message.success("".concat(e.message))}))}},components:{}}),u=m,c=t("2877"),f=Object(c["a"])(u,a,o,!1,null,"2e69054a",null);r["default"]=f.exports}}]);