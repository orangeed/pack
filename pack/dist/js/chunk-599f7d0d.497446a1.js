(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-599f7d0d"],{"22cf":function(t,e,a){},3994:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));var i=a("b775");function n(t){return Object(i["a"])({url:"/virtual/query/statisticsInfo",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/virtual/query/statistics",method:"get",params:t})}},"684e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("page-header-wrapper"),a("a-card",{staticStyle:{"margin-top":"24px"}},[a("help"),a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:8,xxl:6,sm:24}},[a("a-form-item",{attrs:{label:"快速搜索"}},[a("a-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入证件号码、持证人姓名"},on:{blur:function(e){return t.searchInputBlur()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchInputBlur(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"证件类型"}},[a("a-select",{attrs:{placeholder:"请选择证件类型",allowClear:""},on:{change:t.certificateTypeHandleChange},model:{value:t.certificateType,callback:function(e){t.certificateType=e},expression:"certificateType"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("电子护照")]),a("a-select-option",{attrs:{value:"2"}},[t._v("港澳通行证")]),a("a-select-option",{attrs:{value:"3"}},[t._v("台湾通行证")])],1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{placeholder:"请选择证件状态",allowClear:""},on:{change:t.stateHandleChange},model:{value:t.stateType,callback:function(e){t.stateType=e},expression:"stateType"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("离柜")]),a("a-select-option",{attrs:{value:"1"}},[t._v("在柜")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("a-button",{on:{click:t.searchClick}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.reset()}}},[t._v("重置")])],1)],1)],1)],1),a("a-spin",{attrs:{spinning:t.tableLoading}},[a("a-table",{staticStyle:{"margin-top":"24px"},attrs:{columns:t.columns,dataSource:t.dataSource,pagination:t.pagination},scopedSlots:t._u([{key:"credentialsID",fn:function(e,i){return a("span",{},[t._v(t._s(e))])}},{key:"certificateType",fn:function(e,i){return a("span",{},[t._v(t._s(t._f("certificateTypeFilters")(e)))])}},{key:"cardID",fn:function(e,i){return a("span",{},[t._v(t._s(e))])}},{key:"location",fn:function(e,i){return a("span",{},[t._v(t._s(i.cabinet+"号柜"+i.drawer+"号抽屉"))])}},{key:"state",fn:function(e,i){return a("span",{},[a("a-badge",{attrs:{color:t._f("stateColor")(e),text:t._f("stateText")(e)}})],1)}},{key:"action",fn:function(e,i){return a("span",{},[a("a-button",{attrs:{type:"link",disabled:"0"==i.status.toString()},on:{click:function(e){return t.logoutClick(i)}}},[t._v("注销")])],1)}}])})],1)],1),a("a-modal",{attrs:{visible:t.dialogVisible,title:"注销原因",width:"800px",destroyOnClose:"",centered:!0,footer:null},on:{cancel:t.closeModal}},[a("a-card",{staticClass:"card"},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.formData,rules:t.formRules,"label-col":{span:8},"wrapper-col":{span:16}}},[a("a-form-model-item",{attrs:{label:"注销原因",prop:"reason"}},[a("a-input",{attrs:{placeholder:"请输入注销原因"},model:{value:t.formData.reason,callback:function(e){t.$set(t.formData,"reason",e)},expression:"formData.reason"}})],1),a("a-form-model-item",{attrs:{label:"文件",prop:"file"}},[a("a-upload",{staticClass:"avatar-uploader",staticStyle:{display:"flex","justify-content":"center"},attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,"before-upload":t.beforeUpload,accept:".pdf"},on:{change:t.handleChange,customRequest:function(){}}},[a("a-button",{class:t.formData.file?"Upload_have":"Upload",attrs:{type:t.uploadLoading?"loading":"plus",icon:"cloud-upload"}},[t._v(t._s(t.formData.file?"重新上传":"上传"))])],1),t.formData.file?a("embed",{attrs:{src:t.formData.file,width:"500px",height:"300"}}):t._e()],1)],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("a-button",{attrs:{type:"danger"},on:{click:t.saveClick}},[t._v("注销")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.closeModal}},[t._v("关闭")])],1)],1)],1)},n=[],r=(a("99af"),a("ac1f"),a("5319"),a("5530")),o=a("c6ff"),s=a("3994"),c=a("b775");function l(t){return Object(c["a"])({url:"/certificate/status",method:"delete",data:t})}var u=a("e56e"),d=a("6250"),f=[{title:"证件类型",dataIndex:"certificateType",key:"certificateType",width:150,align:"center",scopedSlots:{customRender:"certificateType"}},{title:"证件号码",dataIndex:"credentialsID",key:"credentialsID",width:180,scopedSlots:{customRender:"credentialsID"},align:"center"},{title:"持证人",key:"certificateHolder",width:100,dataIndex:"certificateHolder",align:"center"},{title:"公民身份证号码",key:"cardID",width:210,dataIndex:"cardID",scopedSlots:{customRender:"cardID"},align:"center"},{title:"有效期至",dataIndex:"expirationDate",key:"expirationDate",width:160,align:"center"},{title:"状态",dataIndex:"state",key:"state",width:130,scopedSlots:{customRender:"state"},align:"center"},{title:"操作",key:"action",width:100,scopedSlots:{customRender:"action"},align:"center"}],p=[],h=[{title:"证件号码",dataIndex:"credentialsID",key:"credentialsID",width:180,scopedSlots:{customRender:"credentialsID"},align:"center"},{title:"证件类型",dataIndex:"certificateType",key:"certificateType",width:150,align:"center",scopedSlots:{customRender:"certificateType"}},{title:"操作类型",key:"operationType",width:130,dataIndex:"operationType",align:"center",scopedSlots:{customRender:"operationType"}},{title:"操作时间",dataIndex:"operationTime",key:"operationTime",width:230,align:"center"},{title:"操作结果",key:"operationResult",width:130,dataIndex:"operationResult",align:"center",scopedSlots:{customRender:"operationResult"}},{title:"操作",dataIndex:"action",key:"action",width:230,align:"center",scopedSlots:{customRender:"action"}}],g=[];function m(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)}var y={name:"PapersDetail",data:function(){var t=this;return{columns:f,dataSource:p,detailColumns:h,detailDataSource:g,certificateType:void 0,stateType:void 0,searchValue:"",pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条记录 第").concat(t.pagination.current,"/").concat(Math.ceil(e/t.pagination.pageSize),"页")},onChange:function(e,a){t.pagination.current=e,t.getList()},onShowSizeChange:function(e,a){t.pagination.pageSize=a,t.getList()}},tableLoading:!1,educationDictionary:[],politicalOutlookDictionary:[],ProfessionalJob:[],formData:{},dialogVisible:!1,uploadLoading:!1,formRules:{reason:{required:!0,trigger:"blur",message:"请输入注销原因"},file:{required:!0,trigger:"change",message:"请选择文件"}}}},created:function(){var t=this;this.getList(),Object(u["a"])().then((function(e){if(0!==e.errorCode)return t.$message.error(e.message);t.educationDictionary=e.data.list})),Object(u["b"])().then((function(e){if(0!==e.errorCode)return t.$message.error(e.message);t.politicalOutlookDictionary=e.data.list})),Object(u["c"])().then((function(e){if(0!==e.errorCode)return t.$message.error(e.message);t.ProfessionalJob=e.data.list}))},methods:{getList:function(){var t=this;this.tableLoading=!0,Object(s["a"])({selectValue:this.searchValue,certificateType:this.certificateType?this.certificateType:"",state:this.stateType?this.stateType:"",pageNo:this.pagination.current,pageSize:this.pagination.pageSize,direction:"1"}).then((function(e){if(0!==e.errorCode)return setTimeout((function(){t.tableLoading=!1}),300),t.$message.error(e.message);t.dataSource=e.data.data,t.pagination.total=parseInt(e.data.total)})),setTimeout((function(){t.tableLoading=!1}),300)},deleteCertificateStatus:function(){var t=this,e=Object(r["a"])(Object(r["a"])({},this.formData),{},{file:this.formData.file.replace(/^data:application\/pdf;base64,/,"")});l(e).then((function(e){0===e.errorCode&&(t.$message.success("注销成功"),t.closeModal(),t.getList())}))},searchInputBlur:function(){this.pagination.current=1,this.getList()},certificateTypeHandleChange:function(){this.pagination.current=1,this.getList()},stateHandleChange:function(){this.pagination.current=1,this.getList()},searchClick:function(){this.pagination.current=1,this.getList()},reset:function(){this.searchValue="",this.certificateType=void 0,this.stateType=void 0,this.pagination.current=1,this.getList()},logoutClick:function(t){this.formData.id=t.id,this.dialogVisible=!0},closeModal:function(){this.dialogVisible=!1,this.formData={}},handleChange:function(t){var e=this;"uploading"===t.file.status&&(this.formData.file="",this.uploadLoading=!0,m(t.file.originFileObj,(function(t){e.formData.file=t,e.uploadLoading=!1,e.formData=Object(r["a"])({},e.formData)}))),"done"===t.file.status&&m(t.file.originFileObj,(function(t){e.imageUrl=t,e.uploadLoading=!1}))},beforeUpload:function(t){var e="application/pdf"===t.type;return e||this.$message.error("你只能上传PDF文件!"),e},saveClick:function(){var t=this;this.formData=Object(r["a"])({},this.formData),this.$refs.ruleForm.validate((function(e){if(!e)return!1;t.deleteCertificateStatus()}))}},filters:{stateColor:function(t){return Object(o["a"])(t)},stateText:function(t){return Object(o["b"])(t)},certificateTypeFilters:function(t){return Object(o["d"])(t)}},components:{help:d["a"]}},b=y,v=(a("ffcb"),a("e095"),a("2877")),k=Object(v["a"])(b,i,n,!1,null,"8ea517e6",null);e["default"]=k.exports},dc35:function(t,e,a){},e095:function(t,e,a){"use strict";var i=a("dc35"),n=a.n(i);n.a},ffcb:function(t,e,a){"use strict";var i=a("22cf"),n=a.n(i);n.a}}]);