(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-624171d8"],{"04fa":function(t,e,i){},"2b4b":function(t,e,i){"use strict";var a=i("04fa"),s=i.n(a);s.a},"34c3":function(t,e,i){"use strict";var a=i("8f85"),s=i.n(a);s.a},"552d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"papersOut-box"},[i("page-header-wrapper"),i("a-card",{staticStyle:{position:"relative","margin-top":"24px"}},[i("a-button",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.activeKey&&"4"!==t.activeKey,expression:"activeKey !== '1' && activeKey !== '4'"}],staticClass:"pre",attrs:{icon:"arrow-left",shape:"circle",type:"primary"},on:{click:function(e){return t.pre()}}}),i("div",{staticStyle:{width:"600px","max-width":"800px"}},[i("a-steps",{attrs:{current:t.stepsCur}},[i("a-step",{attrs:{title:"选择出库证件"}}),i("a-step",{attrs:{title:"确认证件出库"}}),i("a-step",{attrs:{title:"完成"}})],1)],1),i("a-tabs",{staticClass:"outerTabs",attrs:{activeKey:t.activeKey,type:"card"},on:{change:t.tabsChange}},[i("a-tab-pane",{key:"1",attrs:{tab:"Tab1"}},[i("a-input-search",{staticStyle:{width:"300px","margin-top":"24px"},attrs:{placeholder:"输入姓名或证件号码进行搜索"},on:{change:t.onSearch,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),i("a-spin",{attrs:{spinning:t.tableLoading}},[i("a-row",{attrs:{gutter:20,justify:"start",type:"flex"}},t._l(t.cData,(function(e,a){return i("papers-card",{key:a,attrs:{cData:e},on:{out:t.out}})})),1)],1),t.cData.length?i("a-pagination",{staticStyle:{"margin-top":"24px"},attrs:{showTotal:function(e){return"共 "+e+" 条记录 第"+t.current+"/"+Math.ceil(e/t.pageSize)+"页"},total:t.total,"show-quick-jumper":"","page-size":t.pageSize},on:{change:t.onPageChange,showSizeChange:t.onShowSizeChange},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}):i("a-empty",{staticStyle:{"margin-top":"24px"}})],1),i("a-tab-pane",{key:"2",attrs:{tab:"Tab2"}},[i("a-card",{staticStyle:{"min-width":"50%",margin:"24px 0"},attrs:{"active-tab-key":t.tabActiveKey,"tab-list":t.tabListNoTitle},on:{tabChange:function(e){return t.onCardTabChange(e)}}},[i("div",[i("div",{staticClass:"papers"},[i("a-row",{attrs:{type:"flex",justify:"space-between"}},[i("a-col",[i("a-avatar",{attrs:{size:100,src:t.selectPerson.headImg,shape:"square"}})],1),i("div",{staticStyle:{"margin-left":"24px"}},[i("p",[t._v("持证人姓名："+t._s(t.selectPerson.fullName))]),i("p",{},[t._v("性别："+t._s(t.selectPerson.sex))]),i("p",[t._v("公民身份号码: "+t._s(t.selectPerson.cardID))]),i("p",[t._v("有效期至："+t._s(t.selectPerson.expirationDate))])]),i("div",[i("p",[t._v("出生日期："+t._s(t.selectPerson.birthday))]),i("p",[t._v("证件号码："+t._s(t.credentialsNumber))])])],1)],1)])])],1),i("a-tab-pane",{key:"3",attrs:{tab:"Tab3"}},[i("div",{staticStyle:{"margin-top":"24px"}},[i("div",{staticStyle:{"text-align":"center"}},[i("p",[t._v("证件类型："+t._s(t.papersText[t.tabActiveKey]))]),i("p",[t._v("证件号码："+t._s(t.credentialsNumber))]),i("p",[t._v("持证人姓名："+t._s(t.selectPerson.fullName))]),i("p",[t._v("性别："+t._s(t.selectPerson.sex))]),i("p",[t._v("公民身份号码："+t._s(t.selectPerson.cardID))]),i("p",[t._v("出生日期："+t._s(t.selectPerson.birthday))]),i("p",[t._v("有效期至："+t._s(t.selectPerson.expirationDate))])])])]),i("a-tab-pane",{key:"4",attrs:{tab:"Tab4"}},[i("a-result",{attrs:{status:t.resultState,"sub-title":t.resultInfo,title:t.resultTitle},scopedSlots:t._u([{key:"extra",fn:function(){return[i("a-button",{key:"console",attrs:{type:"primary"},on:{click:function(e){return t.back()}}},[t._v("返回")])]},proxy:!0}])})],1)],1),i("a-button",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.activeKey&&"4"!==t.activeKey,expression:"activeKey !== '1' && activeKey !== '4'"}],attrs:{type:"primary"},on:{click:function(e){return t.next()}}},[t._v("下一步")]),i("a-divider"),i("div",{staticStyle:{width:"100%"}},[i("p",{staticStyle:{"line-height":"23px","font-size":"20px",color:"#8d8d8d","font-weight":"bold"}},[t._v("说明")]),i("p",{staticClass:"title",staticStyle:{"font-size":"14px",color:"#8d8d8d","font-weight":"bold"}},[t._v(t._s(t.explainTtile))]),i("p",{staticStyle:{"font-size":"14px",color:"#8d8d8d"}},[t._v(t._s(t.explainDetails))])])],1)],1)},s=[],r=(i("99af"),i("7db0"),i("c740"),i("d3b7"),i("25f0"),i("b775")),n={getOutCabinetInfo:function(t){return Object(r["b"])({url:"/virtual/operations/outCabinet",method:"get",params:t})},checkOutCabinetInfo:function(t){return Object(r["b"])({url:"/virtual/operations/outCabinet",method:"post",data:t})}},c=i("c6ff"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-col",[i("a-card",{staticStyle:{"min-width":"300px",margin:"12px 0"},attrs:{hoverable:""}},[i("div",{staticStyle:{display:"flex","align-items":"center",width:"95%"}},[i("div",[i("a-avatar",{attrs:{src:t.cData.headImg}})],1),i("div",{staticStyle:{"margin-left":"10px",width:"100%",height:"70px"}},[i("div",{staticStyle:{"font-weight":"bold",display:"flex","justify-content":"space-between","flex-wrap":"nowrap"}},[i("span",[t._v(t._s(t.cData.fullName))]),i("span",[t._v(t._s(t.cData.cardID))])]),t._l(t.cData.certificate,(function(e,a){return i("div",{key:a,staticStyle:{"font-size":"11px","margin-top":"5px",display:"flex","justify-content":"space-between"}},[i("span",[i("span",[t._v(" "+t._s(t._f("certificateTypeFilters")(e.certificateType))+" ")]),i("span",[t._v(" "+t._s(e.credentialsID)+" ")])]),i("span",{staticStyle:{color:"#71b604"}},[t._v(t._s(t._f("stateFilter")(t.cData.state)))])])}))],2)]),i("template",{staticClass:"ant-card-actions",slot:"actions"},[i("a-button",{attrs:{type:"link"},on:{click:function(e){return t.check()}}},[t._v("证件出库")])],1)],2)],1)},l=[],u={props:{cData:{type:Object,required:!0}},name:"papers-card",data:function(){return{}},created:function(){},methods:{check:function(){this.$emit("out",this.cData)}},filters:{stateFilter:function(t){return Object(c["b"])(t)},certificateTypeFilters:function(t){return Object(c["d"])(t)}}},p=u,f=(i("2b4b"),i("2877")),h=Object(f["a"])(p,o,l,!1,null,"5e5e5b74",null),d=h.exports,b=[],v={passport:Object(c["d"])("1"),hkPermit:Object(c["d"])("2"),taiwanPermit:Object(c["d"])("3")},y={name:"papersOut",data:function(){return{cData:b,papersText:v,stepsCur:0,activeKey:"1",explain:[{title:"选择出库证件",details:"页面默认展示领证审批通过的待出库证件列表，用户选择点击下发的“证件出库”进程该人员证件的出库操作。\n此外，用户可以从上方的搜索栏中输入持证人姓名、证件号码等条件进行查询 ，确定需要出库证件后进行出库操作。"},{title:"确认证件出库",details:"用户需要确认证件出库的相关信息"},{title:"出库完成",details:"出现“出库完成”字样表示当前正价已经入库完成，若显示异常，则联系管理员！"}],tabListNoTitle:[],tabActiveKey:"passport",selectPerson:{},selectCertificate:{},searchValue:"",current:1,pageSize:10,total:0,resultState:"success",resultTitle:"出库成功",resultInfo:"",tableLoading:!1}},created:function(){this.getList()},methods:{onShowSizeChange:function(t,e){this.current=t,this.pageSize=e,this.getList()},tabsChange:function(){},onSelectChange:function(t){this.selectedRowKeys=t},onSearch:function(){this.current=1,this.getList()},pre:function(){if(1===this.stepsCur&&(this.stepsCur--,1===this.selectPerson.certificate.length))return this.activeKey="1";var t=parseInt(this.activeKey)-1;this.activeKey=t.toString()},next:function(){var t=this;if(0===this.stepsCur){var e="-1";e="passport"===this.tabActiveKey?"1":"hkPermit"===this.tabActiveKey?"2":"3",this.selectCertificate=this.selectPerson.certificate.find((function(t){return t.certificateType===e}));var i=parseInt(this.activeKey)+1;this.activeKey=i.toString(),this.stepsCur++}else 1===this.stepsCur&&n.checkOutCabinetInfo(this.selectCertificate).then((function(e){t.resultTitle="出库失败!",t.resultState="error",t.resultInfo="".concat(v[t.tabActiveKey]," ").concat(t.credentialsNumber,"出库失败！"),0===e.errorCode&&(t.resultTitle="出库完成!",t.resultState="success",t.resultInfo="".concat(v[t.tabActiveKey]," ").concat(t.credentialsNumber,"出库完成！"));var i=parseInt(t.activeKey)+1;t.activeKey=i.toString(),t.stepsCur++}))},back:function(){this.stepsCur=0,this.activeKey="1",this.getList()},out:function(t){this.selectPerson=t,this.tabListNoTitle=[];for(var e=0;e<this.selectPerson.certificate.length;e++)switch(this.selectPerson.certificate[e].certificateType){case"1":this.tabListNoTitle.push({key:"passport",tab:this.papersText.passport});break;case"2":this.tabListNoTitle.push({key:"hkPermit",tab:this.papersText.hkPermit});break;case"3":this.tabListNoTitle.push({key:"taiwanPermit",tab:this.papersText.taiwanPermit});break;default:this.tabListNoTitle=[]}if(1===this.selectPerson.certificate.length){this.tabActiveKey=this.tabListNoTitle[0].key,this.selectCertificate=this.getCertificateInfo;var i=parseInt(this.activeKey)+2;this.activeKey=i.toString(),this.stepsCur++}else{this.tabActiveKey=this.tabListNoTitle[0].key;var a=parseInt(this.activeKey)+1;this.activeKey=a.toString()}},onCardTabChange:function(t){this.tabActiveKey=t},getList:function(){var t=this;this.tableLoading=!0,n.getOutCabinetInfo({selectValue:this.searchValue,pageNo:this.current,pageSize:this.pageSize,direction:"1"}).then((function(e){if(0!==e.errorCode)return setTimeout((function(){t.tableLoading=!1}),300),t.cData=[],t.$message.error(e.message);"0"===e.data.total||null===e.data.data?t.cData=[]:(t.total=parseInt(e.data.total),t.cData=e.data.data)})),setTimeout((function(){t.tableLoading=!1}),300)},onPageChange:function(t){this.current=t,this.getList()}},computed:{explainTtile:function(){return this.explain[this.stepsCur].title},explainDetails:function(){return this.explain[this.stepsCur].details},credentialsNumber:function(){if("1"===this.activeKey)return 0;var t=void 0;switch(this.tabActiveKey){case"passport":return t=this.selectPerson.certificate.findIndex((function(t){return"1"===t.certificateType})),this.selectPerson.certificate[t].credentialsID;case"hkPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"2"===t.certificateType})),this.selectPerson.certificate[t].credentialsID;case"taiwanPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"3"===t.certificateType})),this.selectPerson.certificate[t].credentialsID;default:return""}},credentialsID:function(){if("1"===this.activeKey)return 0;var t=void 0;switch(this.tabActiveKey){case"passport":return t=this.selectPerson.certificate.findIndex((function(t){return"1"===t.certificateType})),this.selectPerson.certificate[t].id;case"hkPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"2"===t.certificateType})),this.selectPerson.certificate[t].id;case"taiwanPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"3"===t.certificateType})),this.selectPerson.certificate[t].id;default:return""}},getCertificateInfo:function(){var t="-1";return t="passport"===this.tabActiveKey?"1":"hkPermit"===this.tabActiveKey?"2":"3",this.selectPerson.certificate.find((function(e){return e.certificateType===t}))}},components:{papersCard:d}},g=y,m=(i("61b6"),i("34c3"),Object(f["a"])(g,a,s,!1,null,"6e891226",null));e["default"]=m.exports},"61b6":function(t,e,i){"use strict";var a=i("b8b9"),s=i.n(a);s.a},"8f85":function(t,e,i){},b8b9:function(t,e,i){},c6ff:function(t,e,i){"use strict";function a(t){var e={1:"电子护照",2:"港澳通行证",3:"台湾通行证"};return e[t]}function s(t){switch(t){case"电子护照":return"1";case"港澳通行证":return"2";case"台湾通行证":return"3";default:return"0"}}function r(t){var e={0:"离柜",1:"在柜",2:"待取出",3:"待入库"};return e[t]}function n(t){var e={0:"red",1:"green",2:"blue",3:"orange"};return e[t]}i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return n}))}}]);