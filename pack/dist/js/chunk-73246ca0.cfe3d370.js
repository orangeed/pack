(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73246ca0"],{"00d87":function(t,e){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&i.rotl(t,8)|4278255360&i.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=i.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],i=0,a=0;i<t.length;i++,a+=8)e[a>>>5]|=t[i]<<24-a%32;return e},wordsToBytes:function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(parseInt(t.substr(i,2),16));return e},bytesToBase64:function(t){for(var i=[],a=0;a<t.length;a+=3)for(var n=t[a]<<16|t[a+1]<<8|t[a+2],r=0;r<4;r++)8*a+6*r<=8*t.length?i.push(e.charAt(n>>>6*(3-r)&63)):i.push("=");return i.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],a=0,n=0;a<t.length;n=++a%4)0!=n&&i.push((e.indexOf(t.charAt(a-1))&Math.pow(2,-2*n+8)-1)<<2*n|e.indexOf(t.charAt(a))>>>6-2*n);return i}};t.exports=i})()},"044b":function(t,e){function i(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function a(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&i(t.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(i(t)||a(t)||!!t._isBuffer)}},"3d7e":function(t,e,i){},"552d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"papersOut-box"},[i("page-header-wrapper"),i("a-card",{staticStyle:{position:"relative","margin-top":"24px"}},[i("help"),i("a-button",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.activeKey&&"4"!==t.activeKey,expression:"activeKey !== '1' && activeKey !== '4'"}],staticClass:"pre",attrs:{icon:"arrow-left",shape:"circle",type:"primary"},on:{click:function(e){return t.pre()}}}),i("div",{staticStyle:{width:"600px","max-width":"800px"}},[i("a-steps",{attrs:{current:t.stepsCur}},[i("a-step",{attrs:{title:"选择出库证件"}}),i("a-step",{attrs:{title:"确认证件出库"}}),i("a-step",{attrs:{title:"完成"}})],1)],1),i("a-tabs",{staticClass:"outerTabs",attrs:{activeKey:t.activeKey,type:"card"},on:{change:t.tabsChange}},[i("a-tab-pane",{key:"1",attrs:{tab:"Tab1"}},[i("a-input-search",{staticStyle:{width:"300px","margin-top":"24px"},attrs:{placeholder:"输入姓名或证件号码进行搜索"},on:{change:t.onSearch,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),i("a-spin",{attrs:{spinning:t.tableLoading}},[i("a-row",{attrs:{gutter:20,justify:"start",type:"flex"}},t._l(t.cData,(function(e,a){return i("papers-card",{key:a,attrs:{cData:e},on:{out:t.out}})})),1)],1),t.cData.length?i("a-pagination",{staticStyle:{"margin-top":"24px"},attrs:{showTotal:function(e){return"共 "+e+" 条记录 第"+t.current+"/"+Math.ceil(e/t.pageSize)+"页"},total:t.total,"show-quick-jumper":"","page-size":t.pageSize},on:{change:t.onPageChange,showSizeChange:t.onShowSizeChange},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}):i("a-empty",{staticStyle:{"margin-top":"24px"}})],1),i("a-tab-pane",{key:"2",attrs:{tab:"Tab2"}},[i("a-card",{staticStyle:{"min-width":"50%",margin:"24px 0"},attrs:{"active-tab-key":t.tabActiveKey,"tab-list":t.tabListNoTitle},on:{tabChange:function(e){return t.onCardTabChange(e)}}},[i("div",[i("div",{staticClass:"papers"},[i("a-row",{attrs:{type:"flex",justify:"space-between"}},[i("a-col",[i("a-avatar",{attrs:{size:100,src:t.selectPerson.headImg,shape:"square"}})],1),i("div",{staticStyle:{"margin-left":"24px"}},[i("p",[t._v("持证人姓名："+t._s(t.selectPerson.fullName))]),i("p",{},[t._v("性别："+t._s(t.selectPerson.sex))]),i("p",[t._v("公民身份号码: "+t._s(t.selectPerson.cardID))]),i("p",[t._v("有效期至："+t._s(t.selectPerson.expirationDate))])]),i("div",[i("p",[t._v("出生日期："+t._s(t.selectPerson.birthday))]),i("p",[t._v("证件号码："+t._s(t.credentialsNumber))])])],1)],1)])])],1),i("a-tab-pane",{key:"3",attrs:{tab:"Tab3"}},[i("div",{staticStyle:{"margin-top":"24px"}},[i("div",{staticStyle:{"text-align":"center"}},[i("p",[t._v("证件类型："+t._s(t.papersText[t.tabActiveKey]))]),i("p",[t._v("证件号码："+t._s(t.credentialsNumber))]),i("p",[t._v("持证人姓名："+t._s(t.selectPerson.fullName))]),i("p",[t._v("性别："+t._s(t.selectPerson.sex))]),i("p",[t._v("公民身份号码："+t._s(t.selectPerson.cardID))]),i("p",[t._v("出生日期："+t._s(t.selectPerson.birthday))]),i("p",[t._v("有效期至："+t._s(t.selectPerson.expirationDate))])])])]),i("a-tab-pane",{key:"4",attrs:{tab:"Tab4"}},[i("a-result",{attrs:{status:t.resultState,"sub-title":t.resultInfo,title:t.resultTitle},scopedSlots:t._u([{key:"extra",fn:function(){return[i("a-button",{key:"console",attrs:{type:"primary"},on:{click:function(e){return t.back()}}},[t._v("返回")])]},proxy:!0}])})],1)],1),i("div",[i("a-button",{directives:[{name:"show",rawName:"v-show",value:"1"!==t.activeKey&&"4"!==t.activeKey,expression:"activeKey !== '1' && activeKey !== '4'"}],attrs:{type:"primary",loading:t.iconLoading},on:{click:function(e){return t.check()}}},[t._v("核验出库")])],1),i("a-divider"),i("div",{staticStyle:{width:"100%"}},[i("p",{staticStyle:{"line-height":"23px","font-size":"20px",color:"#8d8d8d","font-weight":"bold"}},[t._v("说明")]),i("p",{staticClass:"title",staticStyle:{"font-size":"14px",color:"#8d8d8d","font-weight":"bold"}},[t._v(t._s(t.explainTtile))]),i("p",{staticStyle:{"font-size":"14px",color:"#8d8d8d"}},[t._v(t._s(t.explainDetails))])])],1)],1)},n=[],r=(i("99af"),i("7db0"),i("c740"),i("d3b7"),i("25f0"),i("b775")),s={getOutCabinetInfo:function(t){return Object(r["a"])({url:"/virtual/operations/outCabinet",method:"get",params:t})},checkOutCabinetInfo:function(t){return Object(r["a"])({url:"/virtual/operations/outCabinet",method:"post",data:t})}},c=i("c6ff"),o=i("6821"),u=i.n(o),l=i("ca00"),f=i("dd62"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-col",[i("a-card",{staticStyle:{"min-width":"300px",margin:"12px 0"},attrs:{hoverable:""}},[i("div",{staticStyle:{display:"flex","align-items":"center",width:"95%"}},[i("div",[i("a-avatar",{attrs:{src:t.cData.headImg}})],1),i("div",{staticStyle:{"margin-left":"10px",width:"100%",height:"70px"}},[i("div",{staticStyle:{"font-weight":"bold",display:"flex","justify-content":"space-between","flex-wrap":"nowrap"}},[i("span",[t._v(t._s(t.cData.fullName))]),i("span",[t._v(t._s(t.cData.cardID))])]),t._l(t.cData.certificate,(function(e,a){return i("div",{key:a,staticStyle:{"font-size":"11px","margin-top":"5px",display:"flex","justify-content":"space-between"}},[i("span",[i("span",[t._v(" "+t._s(t._f("certificateTypeFilters")(e.certificateType))+" ")]),i("span",[t._v(" "+t._s(e.credentialsID)+" ")])]),i("span",{staticStyle:{color:"#71b604"}},[t._v(t._s(t._f("stateFilter")(t.cData.state)))])])}))],2)]),i("template",{staticClass:"ant-card-actions",slot:"actions"},[i("a-button",{attrs:{type:"link"},on:{click:function(e){return t.check()}}},[t._v("证件出库")])],1)],2)],1)},h=[],d={props:{cData:{type:Object,required:!0}},name:"PapersCard",data:function(){return{}},created:function(){},methods:{check:function(){this.$emit("out",this.cData)}},filters:{stateFilter:function(t){return Object(c["b"])(t)},certificateTypeFilters:function(t){return Object(c["d"])(t)}}},b=d,v=(i("6bd7"),i("2877")),y=Object(v["a"])(b,p,h,!1,null,"45c99158",null),g=y.exports,m=i("6250"),x=[],_={passport:Object(c["d"])("1"),hkPermit:Object(c["d"])("2"),taiwanPermit:Object(c["d"])("3")},T={name:"PapersOut",data:function(){return{cData:x,papersText:_,stepsCur:0,activeKey:"1",explain:[{title:"选择出库证件",details:"页面默认展示领证审批通过的待出库证件列表，用户选择点击下发的“证件出库”进程该人员证件的出库操作。\n此外，用户可以从上方的搜索栏中输入持证人姓名、证件号码等条件进行查询 ，确定需要出库证件后进行出库操作。"},{title:"确认证件出库",details:"用户需要确认证件出库的相关信息"},{title:"出库完成",details:"出现“出库完成”字样表示当前正价已经入库完成，若显示异常，则联系管理员！"}],tabListNoTitle:[],tabActiveKey:"passport",selectPerson:{},selectCertificate:{},searchValue:"",current:1,pageSize:10,total:0,resultState:"success",resultTitle:"出库成功",resultInfo:"",tableLoading:!1,iconLoading:!1}},created:function(){this.getList()},methods:{onShowSizeChange:function(t,e){this.current=t,this.pageSize=e,this.getList()},tabsChange:function(){},onSelectChange:function(t){this.selectedRowKeys=t},onSearch:function(){this.current=1,this.getList()},check:function(){var t=this,e=new WebSocket("ws://127.0.0.1:15001/doc/info"),i="zxcvbnmasdfghjkl";e.onerror=function(t){},e.onopen=function(a){var n=Math.round((new Date).getTime()/1e3),r=n+"jixin"+i,s=u()(r),c={timestamp:n,key:i,sign:s};e.send(JSON.stringify(c)),t.$message.loading("正在核验中..."),t.iconLoading=!0},e.onmessage=function(a){e.close();var n=JSON.parse(a.data);if(0===n.errorCode){var r=JSON.parse(Object(l["b"])(n.doc_info,i)),s={certNum:r.doc_no,certType:r.doc_type};f["a"].getDigest(s).then((function(e){0===e.errorCode&&(e.data.certIdent===t.selectPerson.certificate[0].certIdent?(t.$message.success("核验成功"),t.iconLoading=!1,t.next()):(t.$message.error("证件信息与持证人员信息不符！"),t.iconLoading=!1))}))}else t.$message.error(n.message),t.iconLoading=!1},e.onclose=function(t){}},pre:function(){if(1===this.stepsCur&&(this.stepsCur--,1===this.selectPerson.certificate.length))return this.activeKey="1";var t=parseInt(this.activeKey)-1;this.activeKey=t.toString()},next:function(){var t=this;if(0===this.stepsCur){var e="-1";e="passport"===this.tabActiveKey?"1":"hkPermit"===this.tabActiveKey?"2":"3",this.selectCertificate=this.selectPerson.certificate.find((function(t){return t.certificateType===e}));var i=parseInt(this.activeKey)+1;this.activeKey=i.toString(),this.stepsCur++}else 1===this.stepsCur&&s.checkOutCabinetInfo(this.selectCertificate).then((function(e){t.resultTitle="出库失败!",t.resultState="error",t.resultInfo="".concat(_[t.tabActiveKey]," ").concat(t.credentialsNumber,"出库失败！"),0===e.errorCode&&(t.resultTitle="出库完成!",t.resultState="success",t.resultInfo="".concat(_[t.tabActiveKey]," ").concat(t.credentialsNumber,"出库完成！"));var i=parseInt(t.activeKey)+1;t.activeKey=i.toString(),t.stepsCur++})).catch((function(e){t.tableLoading=!1,t.$message.error("服务器错误，操作异常!"+e)}))},back:function(){this.stepsCur=0,this.activeKey="1",this.getList()},out:function(t){this.selectPerson=t,this.tabListNoTitle=[];for(var e=0;e<this.selectPerson.certificate.length;e++)switch(this.selectPerson.certificate[e].certificateType){case"1":this.tabListNoTitle.push({key:"passport",tab:this.papersText.passport});break;case"2":this.tabListNoTitle.push({key:"hkPermit",tab:this.papersText.hkPermit});break;case"3":this.tabListNoTitle.push({key:"taiwanPermit",tab:this.papersText.taiwanPermit});break;default:this.tabListNoTitle=[]}if(1===this.selectPerson.certificate.length){this.tabActiveKey=this.tabListNoTitle[0].key,this.selectCertificate=this.getCertificateInfo;var i=parseInt(this.activeKey)+2;this.activeKey=i.toString(),this.stepsCur++}else{this.tabActiveKey=this.tabListNoTitle[0].key;var a=parseInt(this.activeKey)+1;this.activeKey=a.toString()}},onCardTabChange:function(t){this.tabActiveKey=t},getList:function(){var t=this;this.tableLoading=!0,s.getOutCabinetInfo({selectValue:this.searchValue,pageNo:this.current,pageSize:this.pageSize,direction:"1"}).then((function(e){if(0!==e.errorCode)return setTimeout((function(){t.tableLoading=!1}),300),t.cData=[],t.$message.error(e.message);"0"===e.data.total||null===e.data.data?t.cData=[]:(t.total=parseInt(e.data.total),t.cData=e.data.data)})),setTimeout((function(){t.tableLoading=!1}),300)},onPageChange:function(t){this.current=t,this.getList()}},computed:{explainTtile:function(){return this.explain[this.stepsCur].title},explainDetails:function(){return this.explain[this.stepsCur].details},credentialsNumber:function(){if("1"===this.activeKey)return 0;var t;switch(this.tabActiveKey){case"passport":return t=this.selectPerson.certificate.findIndex((function(t){return"1"===t.certificateType})),this.selectPerson.certificate[t].credentialsID;case"hkPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"2"===t.certificateType})),this.selectPerson.certificate[t].credentialsID;case"taiwanPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"3"===t.certificateType})),this.selectPerson.certificate[t].credentialsID;default:return""}},credentialsID:function(){if("1"===this.activeKey)return 0;var t;switch(this.tabActiveKey){case"passport":return t=this.selectPerson.certificate.findIndex((function(t){return"1"===t.certificateType})),this.selectPerson.certificate[t].id;case"hkPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"2"===t.certificateType})),this.selectPerson.certificate[t].id;case"taiwanPermit":return t=this.selectPerson.certificate.findIndex((function(t){return"3"===t.certificateType})),this.selectPerson.certificate[t].id;default:return""}},getCertificateInfo:function(){var t="-1";return t="passport"===this.tabActiveKey?"1":"hkPermit"===this.tabActiveKey?"2":"3",this.selectPerson.certificate.find((function(e){return e.certificateType===t}))}},components:{papersCard:g,help:m["a"]}},C=T,S=(i("61b6"),i("ea32"),Object(v["a"])(C,a,n,!1,null,"60ec2b34",null));e["default"]=S.exports},"61b6":function(t,e,i){"use strict";var a=i("b8b9"),n=i.n(a);n.a},6821:function(t,e,i){(function(){var e=i("00d87"),a=i("9a634").utf8,n=i("044b"),r=i("9a634").bin,s=function(t,i){t.constructor==String?t=i&&"binary"===i.encoding?r.stringToBytes(t):a.stringToBytes(t):n(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var c=e.bytesToWords(t),o=8*t.length,u=1732584193,l=-271733879,f=-1732584194,p=271733878,h=0;h<c.length;h++)c[h]=16711935&(c[h]<<8|c[h]>>>24)|4278255360&(c[h]<<24|c[h]>>>8);c[o>>>5]|=128<<o%32,c[14+(o+64>>>9<<4)]=o;var d=s._ff,b=s._gg,v=s._hh,y=s._ii;for(h=0;h<c.length;h+=16){var g=u,m=l,x=f,_=p;u=d(u,l,f,p,c[h+0],7,-680876936),p=d(p,u,l,f,c[h+1],12,-389564586),f=d(f,p,u,l,c[h+2],17,606105819),l=d(l,f,p,u,c[h+3],22,-1044525330),u=d(u,l,f,p,c[h+4],7,-176418897),p=d(p,u,l,f,c[h+5],12,1200080426),f=d(f,p,u,l,c[h+6],17,-1473231341),l=d(l,f,p,u,c[h+7],22,-45705983),u=d(u,l,f,p,c[h+8],7,1770035416),p=d(p,u,l,f,c[h+9],12,-1958414417),f=d(f,p,u,l,c[h+10],17,-42063),l=d(l,f,p,u,c[h+11],22,-1990404162),u=d(u,l,f,p,c[h+12],7,1804603682),p=d(p,u,l,f,c[h+13],12,-40341101),f=d(f,p,u,l,c[h+14],17,-1502002290),l=d(l,f,p,u,c[h+15],22,1236535329),u=b(u,l,f,p,c[h+1],5,-165796510),p=b(p,u,l,f,c[h+6],9,-1069501632),f=b(f,p,u,l,c[h+11],14,643717713),l=b(l,f,p,u,c[h+0],20,-373897302),u=b(u,l,f,p,c[h+5],5,-701558691),p=b(p,u,l,f,c[h+10],9,38016083),f=b(f,p,u,l,c[h+15],14,-660478335),l=b(l,f,p,u,c[h+4],20,-405537848),u=b(u,l,f,p,c[h+9],5,568446438),p=b(p,u,l,f,c[h+14],9,-1019803690),f=b(f,p,u,l,c[h+3],14,-187363961),l=b(l,f,p,u,c[h+8],20,1163531501),u=b(u,l,f,p,c[h+13],5,-1444681467),p=b(p,u,l,f,c[h+2],9,-51403784),f=b(f,p,u,l,c[h+7],14,1735328473),l=b(l,f,p,u,c[h+12],20,-1926607734),u=v(u,l,f,p,c[h+5],4,-378558),p=v(p,u,l,f,c[h+8],11,-2022574463),f=v(f,p,u,l,c[h+11],16,1839030562),l=v(l,f,p,u,c[h+14],23,-35309556),u=v(u,l,f,p,c[h+1],4,-1530992060),p=v(p,u,l,f,c[h+4],11,1272893353),f=v(f,p,u,l,c[h+7],16,-155497632),l=v(l,f,p,u,c[h+10],23,-1094730640),u=v(u,l,f,p,c[h+13],4,681279174),p=v(p,u,l,f,c[h+0],11,-358537222),f=v(f,p,u,l,c[h+3],16,-722521979),l=v(l,f,p,u,c[h+6],23,76029189),u=v(u,l,f,p,c[h+9],4,-640364487),p=v(p,u,l,f,c[h+12],11,-421815835),f=v(f,p,u,l,c[h+15],16,530742520),l=v(l,f,p,u,c[h+2],23,-995338651),u=y(u,l,f,p,c[h+0],6,-198630844),p=y(p,u,l,f,c[h+7],10,1126891415),f=y(f,p,u,l,c[h+14],15,-1416354905),l=y(l,f,p,u,c[h+5],21,-57434055),u=y(u,l,f,p,c[h+12],6,1700485571),p=y(p,u,l,f,c[h+3],10,-1894986606),f=y(f,p,u,l,c[h+10],15,-1051523),l=y(l,f,p,u,c[h+1],21,-2054922799),u=y(u,l,f,p,c[h+8],6,1873313359),p=y(p,u,l,f,c[h+15],10,-30611744),f=y(f,p,u,l,c[h+6],15,-1560198380),l=y(l,f,p,u,c[h+13],21,1309151649),u=y(u,l,f,p,c[h+4],6,-145523070),p=y(p,u,l,f,c[h+11],10,-1120210379),f=y(f,p,u,l,c[h+2],15,718787259),l=y(l,f,p,u,c[h+9],21,-343485551),u=u+g>>>0,l=l+m>>>0,f=f+x>>>0,p=p+_>>>0}return e.endian([u,l,f,p])};s._ff=function(t,e,i,a,n,r,s){var c=t+(e&i|~e&a)+(n>>>0)+s;return(c<<r|c>>>32-r)+e},s._gg=function(t,e,i,a,n,r,s){var c=t+(e&a|i&~a)+(n>>>0)+s;return(c<<r|c>>>32-r)+e},s._hh=function(t,e,i,a,n,r,s){var c=t+(e^i^a)+(n>>>0)+s;return(c<<r|c>>>32-r)+e},s._ii=function(t,e,i,a,n,r,s){var c=t+(i^(e|~a))+(n>>>0)+s;return(c<<r|c>>>32-r)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,i){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var a=e.wordsToBytes(s(t,i));return i&&i.asBytes?a:i&&i.asString?r.bytesToString(a):e.bytesToHex(a)}})()},"6bd7":function(t,e,i){"use strict";var a=i("b2bb"),n=i.n(a);n.a},"9a634":function(t,e){var i={utf8:{stringToBytes:function(t){return i.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(i.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e},bytesToString:function(t){for(var e=[],i=0;i<t.length;i++)e.push(String.fromCharCode(t[i]));return e.join("")}}};t.exports=i},b2bb:function(t,e,i){},b8b9:function(t,e,i){},dd62:function(t,e,i){"use strict";var a=i("b775");e["a"]={getEnterCainetInfo:function(t){return Object(a["a"])({url:"/virtual/operations/inCabinet",method:"get",params:t})},addEnterCainetInfo:function(t){return Object(a["a"])({url:"/virtual/operations/inCabinet",method:"post",data:t})},getPersonInfo:function(t){return Object(a["a"])({url:"/person/info",method:"get",params:t})},scan:function(t){return Object(a["a"])({url:"http://127.0.0.1:13001/doc/info",method:"get",params:t})},getDigest:function(t){return Object(a["a"])({url:"/virtual/operations/getDigest",method:"get",params:t})}}},ea32:function(t,e,i){"use strict";var a=i("3d7e"),n=i.n(a);n.a}}]);