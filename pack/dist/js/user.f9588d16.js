(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"00d87":function(e,r){(function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,r){return e<<r|e>>>32-r},rotr:function(e,r){return e<<32-r|e>>>r},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var r=0;r<e.length;r++)e[r]=t.endian(e[r]);return e},randomBytes:function(e){for(var r=[];e>0;e--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(e){for(var r=[],t=0,a=0;t<e.length;t++,a+=8)r[a>>>5]|=e[t]<<24-a%32;return r},wordsToBytes:function(e){for(var r=[],t=0;t<32*e.length;t+=8)r.push(e[t>>>5]>>>24-t%32&255);return r},bytesToHex:function(e){for(var r=[],t=0;t<e.length;t++)r.push((e[t]>>>4).toString(16)),r.push((15&e[t]).toString(16));return r.join("")},hexToBytes:function(e){for(var r=[],t=0;t<e.length;t+=2)r.push(parseInt(e.substr(t,2),16));return r},bytesToBase64:function(e){for(var t=[],a=0;a<e.length;a+=3)for(var o=e[a]<<16|e[a+1]<<8|e[a+2],n=0;n<4;n++)8*a+6*n<=8*e.length?t.push(r.charAt(o>>>6*(3-n)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],a=0,o=0;a<e.length;o=++a%4)0!=o&&t.push((r.indexOf(e.charAt(a-1))&Math.pow(2,-2*o+8)-1)<<2*o|r.indexOf(e.charAt(a))>>>6-2*o);return t}};e.exports=t})()},"044b":function(e,r){function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(t(e)||a(e)||!!e._isBuffer)}},6821:function(e,r,t){(function(){var r=t("00d87"),a=t("9a634").utf8,o=t("044b"),n=t("9a634").bin,i=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?n.stringToBytes(e):a.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=r.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,m=-1732584194,g=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[l>>>5]|=128<<l%32,s[14+(l+64>>>9<<4)]=l;var p=i._ff,f=i._gg,b=i._hh,h=i._ii;for(d=0;d<s.length;d+=16){var v=c,T=u,y=m,C=g;c=p(c,u,m,g,s[d+0],7,-680876936),g=p(g,c,u,m,s[d+1],12,-389564586),m=p(m,g,c,u,s[d+2],17,606105819),u=p(u,m,g,c,s[d+3],22,-1044525330),c=p(c,u,m,g,s[d+4],7,-176418897),g=p(g,c,u,m,s[d+5],12,1200080426),m=p(m,g,c,u,s[d+6],17,-1473231341),u=p(u,m,g,c,s[d+7],22,-45705983),c=p(c,u,m,g,s[d+8],7,1770035416),g=p(g,c,u,m,s[d+9],12,-1958414417),m=p(m,g,c,u,s[d+10],17,-42063),u=p(u,m,g,c,s[d+11],22,-1990404162),c=p(c,u,m,g,s[d+12],7,1804603682),g=p(g,c,u,m,s[d+13],12,-40341101),m=p(m,g,c,u,s[d+14],17,-1502002290),u=p(u,m,g,c,s[d+15],22,1236535329),c=f(c,u,m,g,s[d+1],5,-165796510),g=f(g,c,u,m,s[d+6],9,-1069501632),m=f(m,g,c,u,s[d+11],14,643717713),u=f(u,m,g,c,s[d+0],20,-373897302),c=f(c,u,m,g,s[d+5],5,-701558691),g=f(g,c,u,m,s[d+10],9,38016083),m=f(m,g,c,u,s[d+15],14,-660478335),u=f(u,m,g,c,s[d+4],20,-405537848),c=f(c,u,m,g,s[d+9],5,568446438),g=f(g,c,u,m,s[d+14],9,-1019803690),m=f(m,g,c,u,s[d+3],14,-187363961),u=f(u,m,g,c,s[d+8],20,1163531501),c=f(c,u,m,g,s[d+13],5,-1444681467),g=f(g,c,u,m,s[d+2],9,-51403784),m=f(m,g,c,u,s[d+7],14,1735328473),u=f(u,m,g,c,s[d+12],20,-1926607734),c=b(c,u,m,g,s[d+5],4,-378558),g=b(g,c,u,m,s[d+8],11,-2022574463),m=b(m,g,c,u,s[d+11],16,1839030562),u=b(u,m,g,c,s[d+14],23,-35309556),c=b(c,u,m,g,s[d+1],4,-1530992060),g=b(g,c,u,m,s[d+4],11,1272893353),m=b(m,g,c,u,s[d+7],16,-155497632),u=b(u,m,g,c,s[d+10],23,-1094730640),c=b(c,u,m,g,s[d+13],4,681279174),g=b(g,c,u,m,s[d+0],11,-358537222),m=b(m,g,c,u,s[d+3],16,-722521979),u=b(u,m,g,c,s[d+6],23,76029189),c=b(c,u,m,g,s[d+9],4,-640364487),g=b(g,c,u,m,s[d+12],11,-421815835),m=b(m,g,c,u,s[d+15],16,530742520),u=b(u,m,g,c,s[d+2],23,-995338651),c=h(c,u,m,g,s[d+0],6,-198630844),g=h(g,c,u,m,s[d+7],10,1126891415),m=h(m,g,c,u,s[d+14],15,-1416354905),u=h(u,m,g,c,s[d+5],21,-57434055),c=h(c,u,m,g,s[d+12],6,1700485571),g=h(g,c,u,m,s[d+3],10,-1894986606),m=h(m,g,c,u,s[d+10],15,-1051523),u=h(u,m,g,c,s[d+1],21,-2054922799),c=h(c,u,m,g,s[d+8],6,1873313359),g=h(g,c,u,m,s[d+15],10,-30611744),m=h(m,g,c,u,s[d+6],15,-1560198380),u=h(u,m,g,c,s[d+13],21,1309151649),c=h(c,u,m,g,s[d+4],6,-145523070),g=h(g,c,u,m,s[d+11],10,-1120210379),m=h(m,g,c,u,s[d+2],15,718787259),u=h(u,m,g,c,s[d+9],21,-343485551),c=c+v>>>0,u=u+T>>>0,m=m+y>>>0,g=g+C>>>0}return r.endian([c,u,m,g])};i._ff=function(e,r,t,a,o,n,i){var s=e+(r&t|~r&a)+(o>>>0)+i;return(s<<n|s>>>32-n)+r},i._gg=function(e,r,t,a,o,n,i){var s=e+(r&a|t&~a)+(o>>>0)+i;return(s<<n|s>>>32-n)+r},i._hh=function(e,r,t,a,o,n,i){var s=e+(r^t^a)+(o>>>0)+i;return(s<<n|s>>>32-n)+r},i._ii=function(e,r,t,a,o,n,i){var s=e+(t^(r|~a))+(o>>>0)+i;return(s<<n|s>>>32-n)+r},i._blocksize=16,i._digestsize=16,e.exports=function(e,t){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var a=r.wordsToBytes(i(e,t));return t&&t.asBytes?a:t&&t.asString?n.bytesToString(a):r.bytesToHex(a)}})()},"9a634":function(e,r){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var r=[],t=0;t<e.length;t++)r.push(255&e.charCodeAt(t));return r},bytesToString:function(e){for(var r=[],t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return r.join("")}}};e.exports=t},ac2a:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"main"},[t("div",[t("a-card",{staticClass:"right",staticStyle:{"min-width":"500px",width:"50%",background:"rgba(255,255,255,0.75)","box-shadow":"0 2px 8px rgba(0,0,0,.09)"},attrs:{bordered:!1}},[t("div",{staticClass:"top"},[t("div",{staticClass:"logo"}),t("div",{staticClass:"logoText"},[t("h2",[e._v("国家工作人员")]),t("h2",[e._v("因私出国(境)管理平台")])])]),t("div",{staticClass:"bottom"},[t("h1",{staticStyle:{"text-align":"center"}},[e._v("登录")]),t("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{form:e.form,id:"formLogin"},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"用户名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{rules:[{required:!0,message:"请输入帐户名"},{validator:e.handleUsernameOrEmail}],validateTrigger:"change"}],expression:"[\n                'userName',\n                {\n                  rules: [{ required: true, message: '请输入帐户名' }, { validator: handleUsernameOrEmail }],\n                  validateTrigger: 'change'\n                }\n              ]"}],attrs:{autocomplete:"off",size:"large",type:"text"}})],1),t("a-form-item",{attrs:{label:"密码"}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}],validateTrigger:"blur"}],expression:"[\n                'password',\n                { rules: [{ required: true, message: '请输入密码' }], validateTrigger: 'blur' }\n              ]"}],attrs:{size:"large"}})],1),t("a-form-item",{staticStyle:{"margin-top":"24px"}},[t("a-button",{staticClass:"login-button",staticStyle:{background:"#5A6BF4"},attrs:{disabled:e.state.loginBtn,loading:e.state.loginBtn,htmlType:"submit",size:"large",type:"primary"}},[e._v("确定")])],1)],1),t("div",{staticClass:"version"})],1)])],1),e.requiredTwoStepCaptcha?t("two-step-captcha",{attrs:{visible:e.stepCaptchaVisible},on:{cancel:e.stepCaptchaCancel,success:e.stepCaptchaSuccess}}):e._e(),t("a-modal",{staticClass:"regDialog",attrs:{visible:e.regDialogVisible,title:"单位激活",closable:!1,keyboard:!1,maskClosable:!1,width:600}},[t("a-form-model",e._b({ref:"regForm",attrs:{layout:"horizontal",rules:e.regrules,model:e.regForm}},"a-form-model",e.regForm,!1),[t("a-form-model-item",{attrs:{label:"单位名称:","label-col":{span:9},"wrapper-col":{span:12},prop:"unitName"}},[t("a-input",{attrs:{placeholder:"请输入单位名称"},model:{value:e.regForm.unitName,callback:function(r){e.$set(e.regForm,"unitName",r)},expression:"regForm.unitName"}})],1),t("a-form-model-item",{attrs:{label:"统一社会信用代码:","label-col":{span:9},"wrapper-col":{span:12},prop:"unifiedSocialCreditCode"}},[t("a-input",{attrs:{placeholder:"请输入统一社会信用代码","max-length":18},model:{value:e.regForm.unifiedSocialCreditCode,callback:function(r){e.$set(e.regForm,"unifiedSocialCreditCode",r)},expression:"regForm.unifiedSocialCreditCode"}})],1),t("a-form-model-item",{attrs:{label:"工作联系人:","label-col":{span:9},"wrapper-col":{span:12},prop:"jobContact"}},[t("a-input",{attrs:{placeholder:"请输入工作联系人"},model:{value:e.regForm.jobContact,callback:function(r){e.$set(e.regForm,"jobContact",r)},expression:"regForm.jobContact"}})],1),t("a-form-model-item",{attrs:{label:"工作联系电话:","label-col":{span:9},"wrapper-col":{span:12},prop:"jobPhoneNumber"}},[t("a-input",{attrs:{placeholder:"请输入工作联系电话","max-length":13},model:{value:e.regForm.jobPhoneNumber,callback:function(r){e.$set(e.regForm,"jobPhoneNumber",r)},expression:"regForm.jobPhoneNumber"}})],1),t("a-form-model-item",{attrs:{label:"工作联系人公民身份证号:","label-col":{span:9},"wrapper-col":{span:12},prop:"cardID"}},[t("a-input",{attrs:{placeholder:"请输入工作联系人公民身份证号","max-length":18},model:{value:e.regForm.cardID,callback:function(r){e.$set(e.regForm,"cardID",r)},expression:"regForm.cardID"}})],1),t("a-form-model-item",{attrs:{label:"行政区域编码:","label-col":{span:9},"wrapper-col":{span:12},prop:"administrativeAreaCode"}},[t("a-input",{attrs:{placeholder:"请输入行政区域编码","max-length":6},model:{value:e.regForm.administrativeAreaCode,callback:function(r){e.$set(e.regForm,"administrativeAreaCode",r)},expression:"regForm.administrativeAreaCode"}})],1),t("a-form-model-item",{attrs:{label:"开通模块:","label-col":{span:9},"wrapper-col":{span:12},prop:"selectList"}},[t("a-checkbox-group",{attrs:{options:e.openingFunctionOptions},on:{change:e.changeSelectList},model:{value:e.regForm.selectList,callback:function(r){e.$set(e.regForm,"selectList",r)},expression:"regForm.selectList"}})],1),t("a-form-model-item",{attrs:{label:"Ukey序列号:","label-col":{span:9},"wrapper-col":{span:12}}},[t("a-input",{attrs:{disabled:""},model:{value:e.regForm.ukey,callback:function(r){e.$set(e.regForm,"ukey",r)},expression:"regForm.ukey"}})],1),e.hasthird?t("a-form-model-item",{attrs:{label:"保管柜序列号",prop:"safekeepingCabinetSerialNumber","label-col":{span:9},"wrapper-col":{span:12}}},[t("a-input",{attrs:{placeholder:"请输入保管柜系统SN编码"},model:{value:e.regForm.safekeepingCabinetSerialNumber,callback:function(r){e.$set(e.regForm,"safekeepingCabinetSerialNumber",r)},expression:"regForm.safekeepingCabinetSerialNumber"}})],1):e._e(),t("a-form-model-item",{attrs:{label:"备注:","label-col":{span:9},"wrapper-col":{span:12}}},[t("a-input",{attrs:{placeholder:"请填写备注"},model:{value:e.regForm.remark,callback:function(r){e.$set(e.regForm,"remark",r)},expression:"regForm.remark"}})],1)],1),t("template",{slot:"footer"},[t("a-button",{key:"back",on:{click:e.regDialogCancel}},[e._v("取消")]),t("a-button",{key:"submit",attrs:{type:"primary",loading:e.$store.state.user.loading},on:{click:e.regDialogOK}},[e._v(e._s(e.$store.state.user.btnName))])],1)],2)],1)},o=[],n=(t("caad"),t("d3b7"),t("2532"),t("5530")),i=t("6821"),s=t.n(i),l=t("2f62"),c=t("ca00"),u=t("b775");var m=function(){return Object(u["a"])({url:"/darwerState",method:"get"})};function g(e){return Object(u["a"])({url:"/device/registered",method:"get",params:e})}function d(e){return Object(u["a"])({url:"/device/registered",method:"post",data:e})}var p=t("e56e"),f=t("7b0a"),b=t("9224"),h=t("8593"),v={components:{},data:function(){var e=function(e,r,t){r.includes("3")&&!r.includes("2")?t(new Error("选择证件保管必须选择证件管理")):r.includes("1")||r.includes("2")?t():t(new Error("至少选择证件管理或登记备案"))};return{hasthird:!1,count:0,timer:void 0,btnName:"激活",loading:!1,loginBtn:!1,loginType:0,requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1},regForm:{},openingFunctionOptions:[{label:"登记备案",value:"1"},{label:"证件管理",value:"2"},{label:"证件保管",value:"3"}],unitTypeList:[],regDialogVisible:!1,regrules:{unitName:[{required:!0,trigger:"blur",message:"请输入单位名称"},f["e"]],unifiedSocialCreditCode:[{required:!0,trigger:"blur",message:"请输入统一社会信用代码"},{trigger:"blur",message:"请输入18位统一社会信用代码",min:18,max:18},f["g"]],organizationCodeSuperiorCompetentUnit:[{required:!0,trigger:"blur",message:"请输入上级主管单位组织机构代码"},{trigger:"blur",message:"请输入18位单位组织机构代码",min:18,max:18},f["g"]],superiorSupervisorName:[{required:!0,trigger:"blur",message:"请输入上级主管单位名称"},f["e"]],unitType:[{required:!0,trigger:"change",message:"请选择单位类型"}],jobContact:[{required:!0,trigger:"blur",message:"请输入工作联系人"},f["e"]],unitAddr:[{required:!0,trigger:"blur",message:"请输入单位地址"}],jobPhoneNumber:[{required:!0,trigger:"blur",message:"请输入工作联系电话"},f["a"]],administrativeAreaCode:[{required:!0,trigger:"blur",message:"请输入行政区域编码"},f["d"],{trigger:"blur",message:"请输入6位行政区域编码",min:6,max:6}],safekeepingCabinetSerialNumber:[{required:!0,trigger:"blur",message:"请输入保管柜序列号"},f["c"]],selectList:[{type:"array",validator:e,trigger:"change"},{required:!0,trigger:"change",message:"请选择模块"}],cardID:[{required:!0,trigger:"change",message:"请输入公民身份证号码"},f["b"]]},version:b.version}},created:function(){this.form.userName="admin"},methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])(["Login","Logout"])),{},{handleUsernameOrEmail:function(e,r,t){var a=this.state,o=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;o.test(r)?a.loginType=0:a.loginType=1,t()},handleSubmit:function(e){var r=this;e.preventDefault();var t=this.form.validateFields,a=this.state,o=this.Login;a.loginBtn=!0;var i=["userName","password"];t(i,{force:!0},(function(e,t){if(e)setTimeout((function(){a.loginBtn=!1}),600);else{var i=Object(n["a"])({},t);i[a.loginType?"userName":"email"]=t.userName,i.password=s()(t.password),o(i).then((function(e){r.$store.commit("SET_NAME",{name:i.userName,welcome:""}),g().then((function(e){r.$store.commit("SET_LOADING",!1),r.$store.commit("SET_BTNNAME","激活"),0===e.errorCode&&1==e.data.isActivated&&1==e.data.isRegister?(Object(c["h"])("Access-Token",r.$store.state.user.token),setTimeout((function(){r.$notification.success({message:"欢迎",description:"".concat(Object(c["i"])(),"，欢迎回来")})}),1e3),r.$router.push({path:"/"}),r.getOpeningModul()):(r.$store.commit("SET_LOADING",!1),r.$store.commit("SET_BTNNAME","激活"),r.loginSuccess(e.data.ukey))}))})).catch((function(e){return r.requestFailed(e)})).finally((function(){a.loginBtn=!1}))}}))},stepCaptchaSuccess:function(){this.loginSuccess()},stepCaptchaCancel:function(){var e=this;this.Logout().then((function(){e.loginBtn=!1,e.stepCaptchaVisible=!1}))},loginSuccess:function(e){var r=this;this.regForm.ukey=e,Object(p["e"])().then((function(e){r.unitTypeList=e.data.list})),this.regDialogVisible=!0,setTimeout((function(){r.$notification.warning({message:"请激活",description:"检测到您未激活单位，请激活！"})}),200)},requestFailed:function(e){},changeSelectList:function(e){e.includes("3")?this.hasthird=!0:(this.hasthird=!1,this.$refs["regForm"].clearValidate())},regDialogCancel:function(){var e=this.Logout;e(),this.regDialogVisible=!1,clearInterval(this.timer)},regDialogOK:function(){var e=this;this.$refs["regForm"].validate((function(r){if(!r)return!1;e.$store.commit("SET_LOADING",!0),e.$store.commit("SET_BTNNAME","正在激活中..."),e.regForm.selectList.includes("1")?e.regForm.openingModule1="1":e.regForm.openingModule1="0",e.regForm.selectList.includes("2")?e.regForm.openingModule2="1":e.regForm.openingModule2="0",e.regForm.selectList.includes("3")?e.regForm.openingModule3="1":e.regForm.openingModule3="0",d(Object(n["a"])({},e.regForm)).then((function(r){0===r.errorCode?(e.$store.commit("SET_LOADING",!0),e.$store.commit("SET_BTNNAME","正在激活中..."),Object(c["h"])("Access-Token",e.$store.state.user.token),e.$store.commit("SET_LOADING",!1),e.$store.commit("SET_BTNNAME","激活"),e.$message.success("应用激活成功！"),clearInterval(e.timer),setTimeout((function(){e.$notification.success({message:"欢迎",description:"".concat(Object(c["i"])(),"，欢迎回来")})}),1e3),e.$router.push({path:"/"}),m().then((function(r){0===r.errorCode?e.$message.success("".concat(r.message)):e.$message.warning("".concat(r.message))}))):(e.$store.commit("SET_LOADING",!1),e.$store.commit("SET_BTNNAME","激活"),e.$message.error("".concat(r.message)))})).catch((function(r){var t=r.res.errorCode;switch(t){case 80:e.$store.commit("SET_LOADING",!1),e.$store.commit("SET_BTNNAME","激活");break;default:e.$store.commit("SET_LOADING",!1),e.$store.commit("SET_BTNNAME","激活"),e.$message.error("请求超时，请检查网络状态！");break}}))}))},getOpeningModul:function(){Object(h["d"])({opening_module:"000"}).then((function(e){}))}})},T=v,y=(t("dc70"),t("2877")),C=Object(y["a"])(T,a,o,!1,null,"4b6da374",null);r["default"]=C.exports},d5fa:function(e,r,t){},dc70:function(e,r,t){"use strict";var a=t("d5fa"),o=t.n(a);o.a}}]);